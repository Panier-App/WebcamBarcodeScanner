class t{constructor(t){this._events={}}on(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)}emit(t,...e){let n=this._events[t];n&&n.forEach((t=>{setTimeout((()=>t(...e)),0)}))}}const e=Object.fromEntries([["SSCC",["00"]],["GTIN",["01"]],["CONTENT",["02"]],["BATCH/LOT",["10"]],["PROD DATE",["11"]],["DUE DATE",["12"]],["PACK DATE",["13"]],["BEST BEFORE or BEST BY",["15"]],["SELL BY",["16"]],["USE BY OR EXPIRY",["17"]],["VARIANT",["20"]],["SERIAL",["21"]],["CPV",["22"]],["VAR. COUNT",["30"]],["COUNT",["37"]],["INTERNAL",["90","91","92","93","94","95","96","97","98","99"]],["ADDITIONAL ID",["240"]],["CUST. PART NO.",["241"]],["MTO VARIANT",["242"]],["PCN",["243"]],["SECONDARY SERIAL",["250"]],["REF. TO SOURCE ",["251"]],["GDTI",["253"]],["GLN EXTENSION COMPONENT",["254"]],["GCN",["255"]],["ORDER NUMBER",["400"]],["GINC",["401"]],["GSIN",["402"]],["ROUTE",["403"]],["SHIP TO LOC",["410"]],["BILL TO ",["411"]],["PURCHASE FROM",["412"]],["SHIP FOR LOC",["413"]],["LOC No",["414"]],["PAY TO",["415"]],["PROD/SERV LOC",["416"]],["SHIP TO POST",["420","421"]],["ORIGIN",["422"]],["COUNTRY - INITIAL PROCESS.",["423"]],["COUNTRY - PROCESS.",["424"]],["COUNTRY - DISASSEMBLY",["425"]],["COUNTRY - FULL PROCESS",["426"]],["ORIGIN SUBDIVISION",["427"]],["NHRN PZN",["710"]],["NHRN CIP",["711"]],["NHRN CN",["712"]],["NHRN DRN",["713"]],["NHRN AIM",["714"]],["NET WEIGHT (kg)",["3100","3101","3102","3103","3104","3105"]],["LENGTH (m)",["3110","3111","3112","3113","3114","3115"]],["WIDTH (m)",["3120","3121","3122","3123","3124","3125"]],["HEIGHT (m)",["3130","3131","3132","3133","3134","3135"]],["AREA (m^2)",["3140","3141","3142","3143","3144","3145"]],["NET VOLUME (l)",["3150","3151","3152","3153","3154","3155"]],["NET VOLUME (m^3)",["3160","3161","3162","3163","3164","3165"]],["NET WEIGHT (lb)",["3200","3201","3202","3203","3204","3205"]],["LENGTH (in)",["3210","3211","3212","3213","3214","3215"]],["LENGTH (ft)",["3220","3221","3222","3223","3224","3225"]],["LENGTH (yd)",["3230","3231","3232","3233","3234","3235"]],["WIDTH (in)",["3240","3241","3242","3243","3244","3245"]],["WIDTH (ft)",["3250","3251","3252","3253","3254","3255"]],["WIDTH (yd)",["3260","3261","3262","3263","3264","3265"]],["HEIGHT (in)",["3270","3271","3272","3273","3274","3275"]],["HEIGHT (ft)",["3280","3281","3282","3283","3284","3285"]],["HEIGHT (yd)",["3290","3291","3292","3293","3294","3295"]],["GROSS WEIGHT (kg)",["3300","3301","3302","3303","3304","3305"]],["LENGTH (m), log",["3310","3311","3312","3313","3314","3315"]],["WIDTH (m), log",["3320","3321","3322","3323","3324","3325"]],["HEIGHT (m), log",["3330","3331","3332","3333","3334","3335"]],["AREA (m^2), log",["3340","3341","3342","3343","3344","3345"]],["VOLUME (l), log",["3350","3351","3352","3353","3354","3355"]],["VOLUME (m^3), log",["3360","3361","3362","3363","3364","3365"]],["KG PER m^2",["3370","3371","3372","3373","3374","3375"]],["GROSS WEIGHT (lb)",["3400","3401","3402","3403","3404","3405"]],["LENGTH (in), log",["3410","3411","3412","3413","3414","3415"]],["LENGTH (ft), log",["3420","3421","3422","3423","3424","3425"]],["LENGTH (yd), log",["3430","3431","3432","3433","3434","3435"]],["WIDTH (in), log",["3440","3441","3442","3443","3444","3445"]],["WIDTH (ft), log",["3450","3451","3452","3453","3454","3455"]],["WIDTH (yd), log",["3460","3461","3462","3463","3464","3465"]],["HEIGHT (in), log",["3470","3471","3472","3473","3474","3475"]],["HEIGHT (ft), log",["3480","3481","3482","3483","3484","3485"]],["HEIGHT (yd), log",["3490","3491","3492","3493","3494","3495"]],["AREA (in^2)",["3500","3501","3502","3503","3504","3505"]],["AREA (ft^2)",["3510","3511","3512","3513","3514","3515"]],["AREA (yd^2)",["3520","3521","3522","3523","3524","3525"]],["AREA (in^2), log",["3530","3531","3532","3533","3534","3535"]],["AREA (ft^2), log",["3540","3541","3542","3543","3544","3545"]],["AREA (yd^2), log",["3550","3551","3552","3553","3554","3555"]],["NET WEIGHT (t oz)",["3560","3561","3562","3563","3564","3565"]],["NET VOLUME (oz)",["3570","3571","3572","3573","3574","3575"]],["NET VOLUME (qt)",["3600","3601","3602","3603","3604","3605"]],["NET VOLUME (gal.)",["3610","3611","3612","3613","3614","3615"]],["VOLUME (qt), log",["3620","3621","3622","3623","3624","3625"]],["VOLUME (gal.), log",["3630","3631","3632","3633","3634","3635"]],["VOLUME (in^3) ",["3640","3641","3642","3643","3644","3645"]],["VOLUME (ft^3) ",["3650","3651","3652","3653","3654","3655"]],["VOLUME (yd^3) ",["3660","3661","3662","3663","3664","3665"]],["VOLUME (in^3), log",["3670","3671","3672","3673","3674","3675"]],["VOLUME (ft^3), log",["3680","3681","3682","3683","3684","3685"]],["VOLUME (yd^3), log",["3690","3691","3692","3693","3694","3695"]],["AMOUNT",["3900","3901","3902","3903","3904","3905","3906","3907","3908","3909","3910","3911","3912","3913","3914","3915","3916","3917","3918","3919"]],["PRICE",["3920","3921","3922","3923","3924","3925","3926","3927","3928","3929","3930","3931","3932","3933","3934","3935","3936","3937","3938","3939"]],["PRCNT OFF",["3940","3941","3942","3943"]],["NSN",["7001"]],["MEAT CUT",["7002"]],["EXPIRY TIME",["7003"]],["ACTIVE POTENCY",["7004"]],["CATCH AREA",["7005"]],["FIRST FREEZE DATE",["7006"]],["HARVEST DATE",["7007"]],["AQUATIC SPECIES",["7008"]],["FISHING GEAR TYPE",["7009"]],["PROD METHOD",["7010"]],["REFURB LOT",["7020"]],["FUNC STAT",["7021"]],["REV STAT",["7022"]],["GIAI - ASSEMBLY",["7023"]],["PROCESSOR # 0",["7030"]],["PROCESSOR # 1",["7031"]],["PROCESSOR # 2",["7032"]],["PROCESSOR # 3",["7033"]],["PROCESSOR # 4",["7034"]],["PROCESSOR # 5",["7035"]],["PROCESSOR # 6",["7036"]],["PROCESSOR # 7",["7037"]],["PROCESSOR # 8",["7038"]],["PROCESSOR # 9",["7039"]],["CERT # 0",["7230"]],["CERT # 1",["7231"]],["CERT # 2",["7232"]],["CERT # 3",["7233"]],["CERT # 4",["7234"]],["CERT # 5",["7235"]],["CERT # 6",["7236"]],["CERT # 7",["7237"]],["CERT # 8",["7238"]],["CERT # 9",["7239"]],["DIMENSIONS",["8001"]],["CMT No",["8002"]],["GRAI",["8003"]],["GIAI",["8004"]],["PRICE PER UNIT",["8005"]],["ITIP",["8006"]],["IBAN",["8007"]],["PROD TIME",["8008"]],["OPT SEN",["8009"]],["CPID",["8010"]],["CPID SERIAL",["8011"]],["VERSION",["8012"]],["GMN (for medical devices, the default, global data title is BUDI-DI )",["8013"]],["GSRN - PROVIDER",["8017"]],["GSRN - RECIPIENT",["8018"]],["SRIN",["8019"]],["REF No",["8020"]],["ITIP CONTENT",["8026"]],["POINTS",["8111"]],["PRODUCT URL",["8200"]]].map((t=>t[1].map((e=>[e,t[0]])))).reduce(((t,e)=>[...t,...e]),[])),n={"00":20,"01":16,"02":16,"03":16,"04":18,11:8,12:8,13:8,14:8,15:8,16:8,17:8,18:8,19:8,20:4,31:10,32:10,33:10,34:10,35:10,36:10,41:16},i=Object.fromEntries([["(\\d{12,14}|\\d{8})",["01"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,20})",["10","21","22","243","254","420","710","711","712","713","714","7020","7021","7022","8002","8012"]],["(\\d{6})",["11","12","13","15","16","17","3100","3101","3102","3103","3104","3105","3110","3111","3112","3113","3114","3115","3120","3121","3122","3123","3124","3125","3130","3131","3132","3133","3134","3135","3140","3141","3142","3143","3144","3145","3150","3151","3152","3153","3154","3155","3160","3161","3162","3163","3164","3165","3200","3201","3202","3203","3204","3205","3210","3211","3212","3213","3214","3215","3220","3221","3222","3223","3224","3225","3230","3231","3232","3233","3234","3235","3240","3241","3242","3243","3244","3245","3250","3251","3252","3253","3254","3255","3260","3261","3262","3263","3264","3265","3270","3271","3272","3273","3274","3275","3280","3281","3282","3283","3284","3285","3290","3291","3292","3293","3294","3295","3300","3301","3302","3303","3304","3305","3310","3311","3312","3313","3314","3315","3320","3321","3322","3323","3324","3325","3330","3331","3332","3333","3334","3335","3340","3341","3342","3343","3344","3345","3350","3351","3352","3353","3354","3355","3360","3361","3362","3363","3364","3365","3370","3371","3372","3373","3374","3375","3400","3401","3402","3403","3404","3405","3410","3411","3412","3413","3414","3415","3420","3421","3422","3423","3424","3425","3430","3431","3432","3433","3434","3435","3440","3441","3442","3443","3444","3445","3450","3451","3452","3453","3454","3455","3460","3461","3462","3463","3464","3465","3470","3471","3472","3473","3474","3475","3480","3481","3482","3483","3484","3485","3490","3491","3492","3493","3494","3495","3500","3501","3502","3503","3504","3505","3510","3511","3512","3513","3514","3515","3520","3521","3522","3523","3524","3525","3530","3531","3532","3533","3534","3535","3540","3541","3542","3543","3544","3545","3550","3551","3552","3553","3554","3555","3560","3561","3562","3563","3564","3565","3570","3571","3572","3573","3574","3575","3600","3601","3602","3603","3604","3605","3610","3611","3612","3613","3614","3615","3620","3621","3622","3623","3624","3625","3630","3631","3632","3633","3634","3635","3640","3641","3642","3643","3644","3645","3650","3651","3652","3653","3654","3655","3660","3661","3662","3663","3664","3665","3670","3671","3672","3673","3674","3675","3680","3681","3682","3683","3684","3685","3690","3691","3692","3693","3694","3695","7006","8005"]],["(\\d{2})",["20"]],["(\\d{0,8})",["30","37"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,30})",["90","240","241","250","251","400","401","403","7002","7023","8004","8013"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,90})",["91","92","93","94","95","96","97","98","99"]],["(\\d{0,6})",["242"]],["(\\d{13})([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,17})",["253"]],["(\\d{13})(\\d{0,12})",["255"]],["(\\d{17})",["402"]],["(\\d{13})",["410","411","412","413","414","415","416","7001"]],["(\\d{3})([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,9})",["421"]],["(\\d{3})",["422","424","426"]],["(\\d{3})(\\d{0,12})",["423","425"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,3})",["427","7008"]],["(\\d{0,15})",["3900","3901","3902","3903","3904","3905","3906","3907","3908","3909","3920","3921","3922","3923","3924","3925","3926","3927","3928","3929"]],["(\\d{3})(\\d{0,15})",["3910","3911","3912","3913","3914","3915","3916","3917","3918","3919","3930","3931","3932","3933","3934","3935","3936","3937","3938","3939"]],["(\\d{4})",["3940","3941","3942","3943","8111"]],["(\\d{10})",["7003"]],["(\\d{0,4})",["7004"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,12})",["7005"]],["(\\d{6,12})",["7007"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,10})",["7009"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,2})",["7010"]],["(\\d{3})([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,27})",["7030","7031","7032","7033","7034","7035","7036","7037","7038","7039"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{2,30})",["7230","7231","7232","7233","7234","7235","7236","7237","7238","7239"]],["(\\d{14})",["8001","02"]],["(\\d{14})([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,16})",["8003"]],["(\\d{14})(\\d{2})(\\d{2})",["8006","8026"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,34})",["8007"]],["(\\d{8})(\\d{0,4})",["8008"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,50})",["8009"]],["([\\x23\\x2D\\x2F\\x30-\\x39\\x41-\\x5A]{0,30})",["8010"]],["(\\d{0,12})",["8011"]],["(\\d{18})",["8017","8018","00"]],["(\\d{0,10})",["8019"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,25})",["8020"]],["([\\x21-\\x22\\x25-\\x2F\\x30-\\x3F\\x41-\\x5A\\x5F\\x61-\\x7A]{0,70})",["8110","8112","8200"]]].map((t=>t[1].map((e=>[e,t[0]])))).reduce(((t,e)=>[...t,...e]),[])),r={253:13,255:13,402:"L",410:"L",411:"L",412:"L",413:"L",414:"L",415:"L",416:"L",8003:14,8006:14,8017:"L",8018:"L",8026:14,"00":"L","01":"L","02":"L"};class o{static is(t){return"string"==typeof t&&(t.match(/^(https?|HTTPS?):(\/\/((([^\/?#]*)@)?([^\/?#:]*)(:([^\/?#]*))?))?([^?#]*)(((\/(01|8006|8013|8010|414|415|417|8017|8018|255|00|253|401|402|8003|8004|240)\/)(\d{4}[^\/]+)(\/[^/]+\/[^/]+)?[/]?(\?([^?\n]*))?(#([^\n]*))?))/)||t.match(/^(https?|HTTPS?):(\/\/((([^\/?#]*)@)?([^\/?#:]*)(:([^\/?#]*))?))?([^?#]*)((\/[0-9A-Za-z_-]{10,}$))/))}static calculateCheckDigit(t,e){let n=0,i=0;for(let o=("L"===r[t]?e.length:r[t])-2;o>=0;o--){let t;t=n%2==0?3:1,i+=e.charAt(o)*t,n++}return(10-i%10)%10}static verifyCheckDigit(t,e){if(!r[t])return!0;let n="L"===r[t]?e.length:r[t],i=parseInt(e.charAt(n-1),10),s=o.calculateCheckDigit(t,e);return i===s||(console.log(`Invalid check digit: An invalid check digit was found for the primary identification key (${t})${e}; the correct check digit should be ${s} at position ${n}`),!1)}static verifySyntax(t,e){return!!new RegExp("^"+i[t]+"$").test(e)||(console.log(`Syntax error: Invalid syntax for value of (${t}): ${e}`),!1)}static parse(t){let n=[],i=new URL(t);if("/"!=i.pathname){let t=i.pathname.substr(1).split("/");for(;t.length>=2;)n.push([t.shift(),decodeURIComponent(t.shift())])}if(""!=i.search){let t=[...new URLSearchParams(i.search.replace(/;/,"&"))];for(let[e,i]of t)n.push([e,i])}let r=[];for(let[t,i]of n){let n=!0;n&=o.verifySyntax(t,i),n&=o.verifyCheckDigit(t,i),n&&("01"!=t&&"02"!=t||(i=i.padStart(14,"0")),r.push({ai:t,value:i,label:e[t]}))}return r.sort(((t,e)=>t.ai.localeCompare(e.ai))),r}}const s=String.fromCharCode(29);class a{static parse(t){let i=[],r=t.split(s);for(let t of r)for(;t.length;){let e=t.substr(0,2);e in n?(i.push({value:t.substr(0,n[e])}),t=t.substr(n[e])):(i.push({value:t}),t="")}for(let t of i){let n;for(let i=2;i<=4;i++)if(t.value.substr(0,i)in e){n=i;break}n&&(t.ai=t.value.substr(0,n),t.value=t.value.substr(n),t.label=e[t.ai])}return i}}var c={UPCA:class{static compress(t){return"string"==typeof t&&12===t.length&&/^\d{12}$/.test(t)?"0000"==t.slice(4,8)&&t[3]>="0"&&t[3]<="2"?t.slice(0,3)+t.slice(8,11)+t[3]+t[11]:"00000"==t.slice(4,9)?t.slice(0,4)+t.slice(9,11)+"3"+t[11]:"00000"==t.slice(5,10)?t.slice(0,5)+t.slice(10,11)+"4"+t[11]:"0000"==t.slice(6,10)&&t[11]>=5&&t[11]<=9?t.slice(0,6)+t[10]+t[11]:t:t}},UPCE:class{static expand(t){const e=t.substring(1,7),n=t.charAt(7);let i=t.charAt(0);switch(e.charAt(5)){case"0":case"1":case"2":i+=e.substring(0,2)+e.charAt(5)+"0000"+e.substring(2,5);break;case"3":i+=e.substring(0,3)+"00000"+e.substring(3,5);break;case"4":i+=e.substring(0,4)+"00000"+e.charAt(4);break;default:i+=e.substring(0,5)+"0000"+ +e.charAt(5)}return i+=n,i}}};class l{static DigitalLink=o;static parse(t){let e=[];if(t.fnc1||t.value.includes(String.fromCharCode(29))?e=a.parse(t.value):o.is(t.value)?e=o.parse(t.value):t.symbology?.startsWith("gs1-databar")?e=a.parse(t.value):"itf"===t.symbology&&14===t.value.length?e=[{ai:"01",label:"GTIN",value:t.value}]:["upca","ean8","ean13"].includes(t.symbology)&&(e=[{ai:"01",label:"GTIN",value:t.value.padStart(14,"0")}]),"upce"===t.symbology&&(e=[{ai:"01",label:"GTIN",value:c.UPCE.expand(t.value).padStart(14,"0")}]),e.length){let t={elements:e},n=e.find((t=>"01"===t.ai));return n&&(t.gtin=n.value),t}}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u=Symbol("Comlink.proxy"),h=Symbol("Comlink.endpoint"),p=Symbol("Comlink.releaseProxy"),d=Symbol("Comlink.finalizer"),f=Symbol("Comlink.thrown"),v=t=>"object"==typeof t&&null!==t||"function"==typeof t,g=new Map([["proxy",{canHandle:t=>v(t)&&t[u],serialize(t){const{port1:e,port2:n}=new MessageChannel;return m(t,e),[n,[n]]},deserialize:t=>(t.start(),w(t))}],["throw",{canHandle:t=>v(t)&&f in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function m(t,e=globalThis,n=["*"]){e.addEventListener("message",(function i(r){if(!r||!r.data)return;if(!function(t,e){for(const n of t){if(e===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}return!1}(n,r.origin))return void console.warn(`Invalid origin '${r.origin}' for comlink proxy`);const{id:o,type:s,path:a}=Object.assign({path:[]},r.data),c=(r.data.argumentList||[]).map($);let l;try{const e=a.slice(0,-1).reduce(((t,e)=>t[e]),t),n=a.reduce(((t,e)=>t[e]),t);switch(s){case"GET":l=n;break;case"SET":e[a.slice(-1)[0]]=$(r.data.value),l=!0;break;case"APPLY":l=n.apply(e,c);break;case"CONSTRUCT":l=function(t){return Object.assign(t,{[u]:!0})}(new n(...c));break;case"ENDPOINT":{const{port1:e,port2:n}=new MessageChannel;m(t,n),l=function(t,e){return C.set(t,e),t}(e,[e])}break;case"RELEASE":l=void 0;break;default:return}}catch(t){l={value:t,[f]:0}}Promise.resolve(l).catch((t=>({value:t,[f]:0}))).then((n=>{const[r,a]=I(n);e.postMessage(Object.assign(Object.assign({},r),{id:o}),a),"RELEASE"===s&&(e.removeEventListener("message",i),y(e),d in t&&"function"==typeof t[d]&&t[d]())})).catch((t=>{const[n,i]=I({value:new TypeError("Unserializable return value"),[f]:0});e.postMessage(Object.assign(Object.assign({},n),{id:o}),i)}))})),e.start&&e.start()}function y(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function w(t,e){return P(t,[],e)}function b(t){if(t)throw new Error("Proxy has been released and is not useable")}function x(t){return A(t,{type:"RELEASE"}).then((()=>{y(t)}))}const T=new WeakMap,E="FinalizationRegistry"in globalThis&&new FinalizationRegistry((t=>{const e=(T.get(t)||0)-1;T.set(t,e),0===e&&x(t)}));function P(t,e=[],n=function(){}){let i=!1;const r=new Proxy(n,{get(n,o){if(b(i),o===p)return()=>{!function(t){E&&E.unregister(t)}(r),x(t),i=!0};if("then"===o){if(0===e.length)return{then:()=>r};const n=A(t,{type:"GET",path:e.map((t=>t.toString()))}).then($);return n.then.bind(n)}return P(t,[...e,o])},set(n,r,o){b(i);const[s,a]=I(o);return A(t,{type:"SET",path:[...e,r].map((t=>t.toString())),value:s},a).then($)},apply(n,r,o){b(i);const s=e[e.length-1];if(s===h)return A(t,{type:"ENDPOINT"}).then($);if("bind"===s)return P(t,e.slice(0,-1));const[a,c]=S(o);return A(t,{type:"APPLY",path:e.map((t=>t.toString())),argumentList:a},c).then($)},construct(n,r){b(i);const[o,s]=S(r);return A(t,{type:"CONSTRUCT",path:e.map((t=>t.toString())),argumentList:o},s).then($)}});return function(t,e){const n=(T.get(e)||0)+1;T.set(e,n),E&&E.register(t,e,t)}(r,t),r}function S(t){const e=t.map(I);return[e.map((t=>t[0])),(n=e.map((t=>t[1])),Array.prototype.concat.apply([],n))];var n}const C=new WeakMap;function I(t){for(const[e,n]of g)if(n.canHandle(t)){const[i,r]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},r]}return[{type:"RAW",value:t},C.get(t)||[]]}function $(t){switch(t.type){case"HANDLER":return g.get(t.name).deserialize(t.value);case"RAW":return t.value}}function A(t,e,n){return new Promise((i=>{const r=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(n){n.data&&n.data.id&&n.data.id===r&&(t.removeEventListener("message",e),i(n.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:r},e),n)}))}const O=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],_=O.map((([t])=>t)),R=_.filter(((t,e)=>"L"===O[e][1])),M=_.filter(((t,e)=>"M"===O[e][1]));function D(t){switch(t){case"Linear-Codes":return R.reduce(((t,e)=>t|D(e)),0);case"Matrix-Codes":return M.reduce(((t,e)=>t|D(e)),0);case"Any":return(1<<O.length)-1;case"None":return 0;default:return 1<<_.indexOf(t)}}function k(t){if(0===t)return"None";const e=31-Math.clz32(t);return _[e]}function F(t){return t.reduce(((t,e)=>t|D(e)),0)}const L=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function N(t){return L.indexOf(t)}const U=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function H(t){return"UnicodeBig"===t?U.indexOf("UTF16BE"):U.indexOf(t)}const j=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function W(t){return j[t]}const G=["Ignore","Read","Require"];function V(t){return G.indexOf(t)}const z=["Plain","ECI","HRI","Hex","Escaped"];function B(t){return z.indexOf(t)}const Y={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function X(t){return{...t,formats:F(t.formats),binarizer:N(t.binarizer),eanAddOnSymbol:V(t.eanAddOnSymbol),textMode:B(t.textMode),characterSet:H(t.characterSet)}}function q(t){return{...t,format:k(t.format),contentType:W(t.contentType),eccLevel:t.ecLevel}}const K={locateFile:(t,e)=>{const n=t.match(/_(.+?)\.wasm$/);return n?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.2.4/dist/${n[1]}/${t}`:e+t}},Q=new WeakMap;function Z(t,e){return Object.is(t,e)||Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every((n=>Object.hasOwn(e,n)&&t[n]===e[n]))}function J(t,{overrides:e,equalityFn:n=Z,fireImmediately:i=!1}={}){var r;const[o,s]=null!=(r=Q.get(t))?r:[K],a=null!=e?e:o;let c;if(i){if(s&&(c=n(o,a)))return s;const e=t({...a});return Q.set(t,[a,e]),e}(null!=c?c:n(o,a))||Q.set(t,[a])}async function tt(t={}){var e,n,i=t,r=!!globalThis.window,o=typeof Bun<"u",s=!!globalThis.WorkerGlobalScope;null!==(e=globalThis.process)&&void 0!==e&&null!==(e=e.versions)&&void 0!==e&&e.node&&(null===(n=globalThis.process)||void 0===n||n.type);var a,c,l="./this.program",u="";if(r||s||o){try{u=new URL(".",undefined).href}catch{}s&&(c=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),a=async t=>{var e=await fetch(t,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw new Error(e.status+" : "+e.url)}}var h,p,d,f,v,g,m,y,w,b,x,T,E=console.log.bind(console),P=console.error.bind(console),S=!1,C=!1;function I(){var t=Ce.buffer;f=new Int8Array(t),g=new Int16Array(t),i.HEAPU8=v=new Uint8Array(t),m=new Uint16Array(t),y=new Int32Array(t),w=new Uint32Array(t),b=new Float32Array(t),x=new Float64Array(t)}function $(t){var e,n;null===(e=i.onAbort)||void 0===e||e.call(i,t),P(t="Aborted("+t+")"),S=!0,t+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(t);throw null===(n=d)||void 0===n||n(r),r}function A(){return t="zxing_reader.wasm",i.locateFile?i.locateFile(t,u):u+t;var t}async function O(t){if(!h)try{var e=await a(t);return new Uint8Array(e)}catch{}return function(t){if(t==T&&h)return new Uint8Array(h);if(c)return c(t);throw"both async and sync fetching of the wasm failed"}(t)}async function _(t,e,n){if(!t&&WebAssembly.instantiateStreaming)try{var i=fetch(e,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(i,n)}catch(t){P(`wasm streaming compile failed: ${t}`),P("falling back to ArrayBuffer instantiation")}return async function(t,e){try{var n=await O(t);return await WebAssembly.instantiate(n,e)}catch(t){P(`failed to asynchronously prepare wasm: ${t}`),$(t)}}(e,n)}var R=t=>{for(;t.length>0;)t.shift()(i)},M=[],D=t=>M.push(t),k=[],F=t=>k.push(t),L=t=>we(t),N=()=>be(),U=[],H=0,j=0;class W{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){w[this.ptr+4>>2]=t}get_type(){return w[this.ptr+4>>2]}set_destructor(t){w[this.ptr+8>>2]=t}get_destructor(){return w[this.ptr+8>>2]}set_caught(t){t=t?1:0,f[this.ptr+12]=t}get_caught(){return 0!=f[this.ptr+12]}set_rethrown(t){t=t?1:0,f[this.ptr+13]=t}get_rethrown(){return 0!=f[this.ptr+13]}init(t,e){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(e)}set_adjusted_ptr(t){w[this.ptr+16>>2]=t}get_adjusted_ptr(){return w[this.ptr+16>>2]}}var G=t=>ye(t),V=t=>{var e=j;if(!e)return G(0),0;var n=new W(e);n.set_adjusted_ptr(e);var i=n.get_type();if(!i)return G(0),e;for(var r of t){if(0===r||r===i)break;var o=n.ptr+16;if(Ee(r,i,o))return G(r),e}return G(i),e},z={},B=t=>{for(;t.length;){var e=t.pop();t.pop()(e)}};function Y(t){return this.fromWireType(w[t>>2])}var X={},q={},K={},Q=class extends Error{constructor(t){super(t),this.name="InternalError"}},Z=t=>{throw new Q(t)},J=(t,e,n)=>{function i(e){var i=n(e);i.length!==t.length&&Z("Mismatched type converter count");for(var r=0;r<t.length;++r)it(t[r],i[r])}t.forEach((t=>K[t]=e));var r=new Array(e.length),o=[],s=0;{const t=e;for(let e=0;e<t.length;++e){const n=t[e];q.hasOwnProperty(n)?r[e]=q[n]:(o.push(n),X.hasOwnProperty(n)||(X[n]=[]),X[n].push((()=>{r[e]=q[n],++s===o.length&&i(r)})))}}0===o.length&&i(r)},tt=t=>{for(var e="";;){var n=v[t++];if(!n)return e;e+=String.fromCharCode(n)}},et=class extends Error{constructor(t){super(t),this.name="BindingError"}},nt=t=>{throw new et(t)};function it(t,e){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i=e.name;if(t||nt(`type "${i}" must have a positive integer typeid pointer`),q.hasOwnProperty(t)){if(n.ignoreDuplicateRegistrations)return;nt(`Cannot register type '${i}' twice`)}if(q[t]=e,delete K[t],X.hasOwnProperty(t)){var r=X[t];delete X[t],r.forEach((t=>t()))}}(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}var rt=t=>({count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}),ot=t=>{nt(t.$$.ptrType.registeredClass.name+" instance already deleted")},st=!1,at=t=>{},ct=t=>{t.count.value-=1,0===t.count.value&&(t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)})(t)},lt=t=>globalThis.FinalizationRegistry?(st=new FinalizationRegistry((t=>{ct(t.$$)})),at=t=>st.unregister(t),(lt=t=>{var e=t.$$;if(!!e.smartPtr){var n={$$:e};st.register(t,n,t)}return t})(t)):(lt=t=>t,t);function ut(){}var ht=(t,e)=>Object.defineProperty(e,"name",{value:t}),pt={},dt=(t,e,n)=>{if(void 0===t[e].overloadTable){var i=t[e];t[e]=function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t[e].overloadTable.hasOwnProperty(r.length)||nt(`Function '${n}' called with an invalid number of arguments (${r.length}) - expects one of (${t[e].overloadTable})!`),t[e].overloadTable[r.length].apply(this,r)},t[e].overloadTable=[],t[e].overloadTable[i.argCount]=i}},ft=(t,e,n)=>{i.hasOwnProperty(t)?((void 0===n||void 0!==i[t].overloadTable&&void 0!==i[t].overloadTable[n])&&nt(`Cannot register public name '${t}' twice`),dt(i,t,t),i[t].overloadTable.hasOwnProperty(n)&&nt(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),i[t].overloadTable[n]=e):(i[t]=e,i[t].argCount=n)};function vt(t,e,n,i,r,o,s,a){this.name=t,this.constructor=e,this.instancePrototype=n,this.rawDestructor=i,this.baseClass=r,this.getActualType=o,this.upcast=s,this.downcast=a,this.pureVirtualFunctions=[]}var gt=(t,e,n)=>{for(;e!==n;)e.upcast||nt(`Expected null or instance of ${n.name}, got an instance of ${e.name}`),t=e.upcast(t),e=e.baseClass;return t},mt=t=>{if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t};function yt(t,e){if(null===e)return this.isReference&&nt(`null is not a valid ${this.name}`),0;e.$$||nt(`Cannot pass "${mt(e)}" as a ${this.name}`),e.$$.ptr||nt(`Cannot pass deleted object as a pointer of type ${this.name}`);var n=e.$$.ptrType.registeredClass;return gt(e.$$.ptr,n,this.registeredClass)}function wt(t,e){var n;if(null===e)return this.isReference&&nt(`null is not a valid ${this.name}`),this.isSmartPointer?(n=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,n),n):0;(!e||!e.$$)&&nt(`Cannot pass "${mt(e)}" as a ${this.name}`),e.$$.ptr||nt(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&e.$$.ptrType.isConst&&nt(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);var i=e.$$.ptrType.registeredClass;if(n=gt(e.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&nt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?n=e.$$.smartPtr:nt(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:n=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)n=e.$$.smartPtr;else{var r=e.clone();n=this.rawShare(n,Wt.toHandle((()=>r.delete()))),null!==t&&t.push(this.rawDestructor,n)}break;default:nt("Unsupporting sharing policy")}return n}function bt(t,e){if(null===e)return this.isReference&&nt(`null is not a valid ${this.name}`),0;e.$$||nt(`Cannot pass "${mt(e)}" as a ${this.name}`),e.$$.ptr||nt(`Cannot pass deleted object as a pointer of type ${this.name}`),e.$$.ptrType.isConst&&nt(`Cannot convert argument of type ${e.$$.ptrType.name} to parameter type ${this.name}`);var n=e.$$.ptrType.registeredClass;return gt(e.$$.ptr,n,this.registeredClass)}var xt=(t,e,n)=>{if(e===n)return t;if(void 0===n.baseClass)return null;var i=xt(t,e,n.baseClass);return null===i?null:n.downcast(i)},Tt={},Et=(t,e)=>(e=((t,e)=>{for(void 0===e&&nt("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e})(t,e),Tt[e]),Pt=(t,e)=>((!e.ptrType||!e.ptr)&&Z("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!==!!e.smartPtr&&Z("Both smartPtrType and smartPtr must be specified"),e.count={value:1},lt(Object.create(t,{$$:{value:e,writable:!0}})));function St(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var n=Et(this.registeredClass,e);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=e,n.$$.smartPtr=t,n.clone();var i=n.clone();return this.destructor(t),i}function r(){return this.isSmartPointer?Pt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):Pt(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var o,s=this.registeredClass.getActualType(e),a=pt[s];if(!a)return r.call(this);o=this.isConst?a.constPointerType:a.pointerType;var c=xt(e,this.registeredClass,o.registeredClass);return null===c?r.call(this):this.isSmartPointer?Pt(o.registeredClass.instancePrototype,{ptrType:o,ptr:c,smartPtrType:this,smartPtr:t}):Pt(o.registeredClass.instancePrototype,{ptrType:o,ptr:c})}function Ct(t,e,n,i,r,o,s,a,c,l,u){this.name=t,this.registeredClass=e,this.isReference=n,this.isConst=i,this.isSmartPointer=r,this.pointeeType=o,this.sharingPolicy=s,this.rawGetPointee=a,this.rawConstructor=c,this.rawShare=l,this.rawDestructor=u,r||void 0!==e.baseClass?this.toWireType=wt:i?(this.toWireType=yt,this.destructorFunction=null):(this.toWireType=bt,this.destructorFunction=null)}var It=(t,e,n)=>{i.hasOwnProperty(t)||Z("Replacing nonexistent public symbol"),void 0!==i[t].overloadTable&&void 0!==n?i[t].overloadTable[n]=e:(i[t]=e,i[t].argCount=n)},$t={},At=[],Ot=t=>{var e=At[t];return e||(At[t]=e=Ie.get(t)),e},_t=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.includes("j")?((t,e,n)=>(t=t.replace(/p/g,"i"),(0,$t[t])(e,...n)))(t,e,n):Ot(e)(...n)},Rt=function(t,e){var n=(t=tt(t)).includes("j")?function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return _t(t,e,r,n)}}(t,e):Ot(e);return"function"!=typeof n&&nt(`unknown function pointer with signature ${t}: ${e}`),n};class Mt extends Error{}var Dt=t=>{var e=de(t),n=tt(e);return fe(e),n},kt=(t,e)=>{var n=[],i={};throw e.forEach((function t(e){if(!i[e]&&!q[e]){if(K[e])return void K[e].forEach(t);n.push(e),i[e]=!0}})),new Mt(`${t}: `+n.map(Dt).join([", "]))},Ft=(t,e)=>{for(var n=[],i=0;i<t;i++)n.push(w[e+4*i>>2]);return n};function Lt(t,e,n,i,r,o){var s=e.length;s<2&&nt("argTypes array size mismatch! Must at least get return value and 'this' types!");var a=null!==e[1]&&null!==n,c=function(t){for(var e=1;e<t.length;++e)if(null!==t[e]&&void 0===t[e].destructorFunction)return!0;return!1}(e),l=!e[0].isVoid,u=s-2,h=new Array(u),p=[],d=[];return ht(t,(function(){var t;d.length=0,p.length=a?2:1,p[0]=r,a&&(t=e[1].toWireType(d,this),p[1]=t);for(var n=0;n<u;++n)h[n]=e[n+2].toWireType(d,n<0||arguments.length<=n?void 0:arguments[n]),p.push(h[n]);return function(n){if(c)B(d);else for(var i=a?1:2;i<e.length;i++){var r=1===i?t:h[i-2];null!==e[i].destructorFunction&&e[i].destructorFunction(r)}if(l)return e[0].fromWireType(n)}(i(...p))}))}var Nt=t=>{const e=(t=t.trim()).indexOf("(");return-1===e?t:t.slice(0,e)},Ut=[],Ht=[0,1,,1,null,1,!0,1,!1,1],jt=t=>{t>9&&0==--Ht[t+1]&&(Ht[t]=void 0,Ut.push(t))},Wt={toValue:t=>(t||nt(`Cannot use deleted val. handle = ${t}`),Ht[t]),toHandle:t=>{switch(t){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const e=Ut.pop()||Ht.length;return Ht[e]=t,Ht[e+1]=1,e}}}},Gt={name:"emscripten::val",fromWireType:t=>{var e=Wt.toValue(t);return jt(t),e},toWireType:(t,e)=>Wt.toHandle(e),readValueFromPointer:Y,destructorFunction:null},Vt=(t,e)=>{switch(e){case 4:return function(t){return this.fromWireType(b[t>>2])};case 8:return function(t){return this.fromWireType(x[t>>3])};default:throw new TypeError(`invalid float width (${e}): ${t}`)}},zt=(t,e,n)=>{switch(e){case 1:return n?t=>f[t]:t=>v[t];case 2:return n?t=>g[t>>1]:t=>m[t>>1];case 4:return n?t=>y[t>>2]:t=>w[t>>2];default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},Bt=Object.assign({optional:!0},Gt),Yt=(t,e,n)=>((t,e,n,i)=>{if(!(i>0))return 0;for(var r=n,o=n+i-1,s=0;s<t.length;++s){var a=t.codePointAt(s);if(a<=127){if(n>=o)break;e[n++]=a}else if(a<=2047){if(n+1>=o)break;e[n++]=192|a>>6,e[n++]=128|63&a}else if(a<=65535){if(n+2>=o)break;e[n++]=224|a>>12,e[n++]=128|a>>6&63,e[n++]=128|63&a}else{if(n+3>=o)break;e[n++]=240|a>>18,e[n++]=128|a>>12&63,e[n++]=128|a>>6&63,e[n++]=128|63&a,s++}}return e[n]=0,n-r})(t,v,e,n),Xt=t=>{for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i<=127?e++:i<=2047?e+=2:i>=55296&&i<=57343?(e+=4,++n):e+=3}return e},qt=globalThis.TextDecoder&&new TextDecoder,Kt=(t,e,n,i)=>{var r=e+n;if(i)return r;for(;t[e]&&!(e>=r);)++e;return e},Qt=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n=Kt(t,e,arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0);if(n-e>16&&t.buffer&&qt)return qt.decode(t.subarray(e,n));for(var i="";e<n;){var r=t[e++];if(128&r){var o=63&t[e++];if(192!=(224&r)){var s=63&t[e++];if((r=224==(240&r)?(15&r)<<12|o<<6|s:(7&r)<<18|o<<12|s<<6|63&t[e++])<65536)i+=String.fromCharCode(r);else{var a=r-65536;i+=String.fromCharCode(55296|a>>10,56320|1023&a)}}else i+=String.fromCharCode((31&r)<<6|o)}else i+=String.fromCharCode(r)}return i},Zt=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,Jt=(t,e,n)=>{var i=t>>1,r=Kt(m,i,e/2,n);if(r-i>16&&Zt)return Zt.decode(m.subarray(i,r));for(var o="",s=i;s<r;++s){var a=m[s];o+=String.fromCharCode(a)}return o},te=(t,e,n)=>{if(null!=n||(n=2147483647),n<2)return 0;for(var i=e,r=(n-=2)<2*t.length?n/2:t.length,o=0;o<r;++o){var s=t.charCodeAt(o);g[e>>1]=s,e+=2}return g[e>>1]=0,e-i},ee=t=>2*t.length,ne=(t,e,n)=>{for(var i="",r=t>>2,o=0;!(o>=e/4);o++){var s=w[r+o];if(!s&&!n)break;i+=String.fromCodePoint(s)}return i},ie=(t,e,n)=>{if(null!=n||(n=2147483647),n<4)return 0;for(var i=e,r=i+n-4,o=0;o<t.length;++o){var s=t.codePointAt(o);if(s>65535&&o++,y[e>>2]=s,(e+=4)+4>r)break}return y[e>>2]=0,e-i},re=t=>{for(var e=0,n=0;n<t.length;++n){t.codePointAt(n)>65535&&n++,e+=4}return e},oe=[],se=(t,e)=>{var n=q[t];return void 0===n&&nt(`${e} has unknown type ${Dt(t)}`),n},ae={},ce=t=>{var e=ae[t];return void 0===e?tt(t):e},le=(t,e)=>Math.ceil(t/e)*e,ue=t=>{var e=(t-Ce.buffer.byteLength+65535)/65536|0;try{return Ce.grow(e),I(),1}catch{}},he={},pe=()=>{if(!pe.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.language||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(var e in he)void 0===he[e]?delete t[e]:t[e]=he[e];var n=[];for(var e in t)n.push(`${e}=${t[e]}`);pe.strings=n}return pe.strings};var de,fe,ve,ge,me,ye,we,be,xe,Te,Ee,Pe,Se,Ce,Ie,$e=[null,[],[]],Ae=(t,e)=>{var n=$e[t];0===e||10===e?((1===t?E:P)(Qt(n)),n.length=0):n.push(e)};if((()=>{let t=ut.prototype;Object.assign(t,{isAliasOf(t){if(!(this instanceof ut&&t instanceof ut))return!1;var e=this.$$.ptrType.registeredClass,n=this.$$.ptr;t.$$=t.$$;for(var i=t.$$.ptrType.registeredClass,r=t.$$.ptr;e.baseClass;)n=e.upcast(n),e=e.baseClass;for(;i.baseClass;)r=i.upcast(r),i=i.baseClass;return e===i&&n===r},clone(){if(this.$$.ptr||ot(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=lt(Object.create(Object.getPrototypeOf(this),{$$:{value:rt(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||ot(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&nt("Object already scheduled for deletion"),at(this),ct(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ot(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&nt("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const e=Symbol.dispose;e&&(t[e]=t.delete)})(),Object.assign(Ct.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){var e;null===(e=this.rawDestructor)||void 0===e||e.call(this,t)},readValueFromPointer:Y,fromWireType:St}),i.noExitRuntime&&i.noExitRuntime,i.print&&(E=i.print),i.printErr&&(P=i.printErr),i.wasmBinary&&(h=i.wasmBinary),i.arguments&&i.arguments,i.thisProgram&&(l=i.thisProgram),i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.shift()();var Oe,_e={s:t=>{var e=new W(t);return e.get_caught()||(e.set_caught(!0),H--),e.set_rethrown(!1),U.push(e),Te(t),ge(t)},w:()=>{me(0,0);var t=U.pop();xe(t.excPtr),j=0},a:()=>V([]),j:t=>V([t]),m:(t,e)=>V([t,e]),Q:()=>{var t=U.pop();t||$("no exception to throw");var e=t.excPtr;throw t.get_rethrown()||(U.push(t),t.set_rethrown(!0),t.set_caught(!1),H++),j=e},p:(t,e,n)=>{throw new W(t).init(e,n),H++,j=t},U:()=>H,d:t=>{throw j||(j=t),j},ca:()=>$(""),ta:t=>{var e=z[t];delete z[t];var n=e.rawConstructor,i=e.rawDestructor,r=e.fields,o=r.map((t=>t.getterReturnType)).concat(r.map((t=>t.setterArgumentType)));J([t],o,(t=>{var o={};{const e=r;for(let n=0;n<e.length;++n){const i=e[n],s=t[n],a=i.getter,c=i.getterContext,l=t[n+r.length],u=i.setter,h=i.setterContext;o[i.fieldName]={read:t=>s.fromWireType(a(c,t)),write:(t,e)=>{var n=[];u(h,t,l.toWireType(n,e)),B(n)},optional:s.optional}}}return[{name:e.name,fromWireType:t=>{var e={};for(var n in o)e[n]=o[n].read(t);return i(t),e},toWireType:(t,e)=>{for(var r in o)if(!(r in e)&&!o[r].optional)throw new TypeError(`Missing field: "${r}"`);var s=n();for(r in o)o[r].write(s,e[r]);return null!==t&&t.push(i,s),s},readValueFromPointer:Y,destructorFunction:i}]}))},ba:(t,e,n,i,r)=>{},oa:(t,e,n,i)=>{it(t,{name:e=tt(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?n:i},readValueFromPointer:function(t){return this.fromWireType(v[t])},destructorFunction:null})},ra:(t,e,n,i,r,o,s,a,c,l,u,h,p)=>{u=tt(u),o=Rt(r,o),a&&(a=Rt(s,a)),l&&(l=Rt(c,l)),p=Rt(h,p);var d=(t=>{var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=48&&e<=57?`_${t}`:t})(u);ft(d,(function(){kt(`Cannot construct ${u} due to unbound types`,[i])})),J([t,e,n],i?[i]:[],(e=>{var n,r;e=e[0],i?r=(n=e.registeredClass).instancePrototype:r=ut.prototype;var s=ht(u,(function(){if(Object.getPrototypeOf(this)!==c)throw new et(`Use 'new' to construct ${u}`);if(void 0===v.constructor_body)throw new et(`${u} has no accessible constructor`);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=v.constructor_body[e.length];if(void 0===i)throw new et(`Tried to invoke ctor of ${u} with invalid number of parameters (${e.length}) - expected (${Object.keys(v.constructor_body).toString()}) parameters instead!`);return i.apply(this,e)})),c=Object.create(r,{constructor:{value:s}});s.prototype=c;var h,f,v=new vt(u,s,c,p,n,o,a,l);v.baseClass&&(null!==(f=(h=v.baseClass).__derivedClasses)&&void 0!==f||(h.__derivedClasses=[]),v.baseClass.__derivedClasses.push(v));var g=new Ct(u,v,!0,!1,!1),m=new Ct(u+"*",v,!1,!1,!1),y=new Ct(u+" const*",v,!1,!0,!1);return pt[t]={pointerType:m,constPointerType:y},It(d,s),[g,m,y]}))},qa:(t,e,n,i,r,o)=>{var s=Ft(e,n);r=Rt(i,r),J([],[t],(t=>{var n=`constructor ${(t=t[0]).name}`;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new et(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${t.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return t.registeredClass.constructor_body[e-1]=()=>{kt(`Cannot construct ${t.name} due to unbound types`,s)},J([],s,(i=>(i.splice(1,0,null),t.registeredClass.constructor_body[e-1]=Lt(n,i,null,r,o),[]))),[]}))},H:(t,e,n,i,r,o,s,a,c,l)=>{var u=Ft(n,i);e=tt(e),e=Nt(e),o=Rt(r,o),J([],[t],(t=>{var i=`${(t=t[0]).name}.${e}`;function r(){kt(`Cannot call ${i} due to unbound types`,u)}e.startsWith("@@")&&(e=Symbol[e.substring(2)]),a&&t.registeredClass.pureVirtualFunctions.push(e);var c=t.registeredClass.instancePrototype,l=c[e];return void 0===l||void 0===l.overloadTable&&l.className!==t.name&&l.argCount===n-2?(r.argCount=n-2,r.className=t.name,c[e]=r):(dt(c,e,i),c[e].overloadTable[n-2]=r),J([],u,(r=>{var a=Lt(i,r,t,o,s);return void 0===c[e].overloadTable?(a.argCount=n-2,c[e]=a):c[e].overloadTable[n-2]=a,[]})),[]}))},ma:t=>it(t,Gt),X:(t,e,n)=>{it(t,{name:e=tt(e),fromWireType:t=>t,toWireType:(t,e)=>e,readValueFromPointer:Vt(e,n),destructorFunction:null})},Y:(t,e,n,i,r,o,s,a)=>{var c=Ft(e,n);t=tt(t),t=Nt(t),r=Rt(i,r),ft(t,(function(){kt(`Cannot call ${t} due to unbound types`,c)}),e-1),J([],c,(n=>{var i=[n[0],null].concat(n.slice(1));return It(t,Lt(t,i,null,r,o),e-1),[]}))},x:(t,e,n,i,r)=>{e=tt(e);let o=t=>t;if(0===i){var s=32-8*n;o=t=>t<<s>>>s,r=o(r)}it(t,{name:e,fromWireType:o,toWireType:(t,e)=>e,readValueFromPointer:zt(e,n,0!==i),destructorFunction:null})},t:(t,e,n)=>{var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function r(t){var e=w[t>>2],n=w[t+4>>2];return new i(f.buffer,n,e)}it(t,{name:n=tt(n),fromWireType:r,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})},sa:(t,e)=>{it(t,Bt)},na:(t,e)=>{it(t,{name:e=tt(e),fromWireType(t){var e;return e=((t,e,n)=>t?Qt(v,t,e,n):"")(t+4,w[t>>2],!0),fe(t),e},toWireType(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n,i="string"==typeof e;i||ArrayBuffer.isView(e)&&1==e.BYTES_PER_ELEMENT||nt("Cannot pass non-string to std::string"),n=i?Xt(e):e.length;var r=ve(4+n+1),o=r+4;return w[r>>2]=n,i?Yt(e,o,n+1):v.set(e,o),null!==t&&t.push(fe,r),r},readValueFromPointer:Y,destructorFunction(t){fe(t)}})},R:(t,e,n)=>{var i,r,o;n=tt(n),2===e?(i=Jt,r=te,o=ee):(i=ne,r=ie,o=re),it(t,{name:n,fromWireType:t=>{var n=w[t>>2],r=i(t+4,n*e,!0);return fe(t),r},toWireType:(t,i)=>{"string"!=typeof i&&nt(`Cannot pass non-string to C++ string type ${n}`);var s=o(i),a=ve(4+s+e);return w[a>>2]=s/e,r(i,a+4,s+e),null!==t&&t.push(fe,a),a},readValueFromPointer:Y,destructorFunction(t){fe(t)}})},I:(t,e,n,i,r,o)=>{z[t]={name:tt(e),rawConstructor:Rt(n,i),rawDestructor:Rt(r,o),fields:[]}},ua:(t,e,n,i,r,o,s,a,c,l)=>{z[t].fields.push({fieldName:tt(e),getterReturnType:n,getter:Rt(i,r),getterContext:o,setterArgumentType:s,setter:Rt(a,c),setterContext:l})},pa:(t,e)=>{it(t,{isVoid:!0,name:e=tt(e),fromWireType:()=>{},toWireType:(t,e)=>{}})},N:(t,e,n)=>{var[i,...r]=((t,e)=>{for(var n=new Array(t),i=0;i<t;++i)n[i]=se(w[e+4*i>>2],`parameter ${i}`);return n})(t,e),o=i.toWireType.bind(i),s=r.map((t=>t.readValueFromPointer.bind(t)));t--;var a=new Array(t),c=`methodCaller<(${r.map((t=>t.name))}) => ${i.name}>`;return(t=>{var e=oe.length;return oe.push(t),e})(ht(c,((e,i,r,c)=>{for(var l=0,u=0;u<t;++u)a[u]=s[u](c+l),l+=8;var h;switch(n){case 0:h=Wt.toValue(e).apply(null,a);break;case 2:h=Reflect.construct(Wt.toValue(e),a);break;case 3:h=a[0];break;case 1:h=Wt.toValue(e)[ce(i)](...a)}return((t,e,n)=>{var i=[],r=t(i,n);return i.length&&(w[e>>2]=Wt.toHandle(i)),r})(o,r,h)})))},va:jt,D:t=>t?(t=ce(t),Wt.toHandle(globalThis[t])):Wt.toHandle(globalThis),S:t=>{t>9&&(Ht[t+1]+=1)},M:(t,e,n,i,r)=>oe[t](e,n,i,r),ia:t=>{var e=Wt.toValue(t);B(e),jt(t)},da:(t,e,n,i)=>{var r=(new Date).getFullYear(),o=new Date(r,0,1),s=new Date(r,6,1),a=o.getTimezoneOffset(),c=s.getTimezoneOffset(),l=Math.max(a,c);w[t>>2]=60*l,y[e>>2]=+(a!=c);var u=t=>{var e=t>=0?"-":"+",n=Math.abs(t);return`UTC${e}${String(Math.floor(n/60)).padStart(2,"0")}${String(n%60).padStart(2,"0")}`},h=u(a),p=u(c);c<a?(Yt(h,n,17),Yt(p,i,17)):(Yt(h,i,17),Yt(p,n,17))},ga:t=>{var e=v.length,n=2147483648;if((t>>>=0)>n)return!1;for(var i=1;i<=4;i*=2){var r=e*(1+.2/i);r=Math.min(r,t+100663296);var o=Math.min(n,le(Math.max(t,r),65536));if(ue(o))return!0}return!1},ea:(t,e)=>{var n=0,i=0;for(var r of pe()){var o=e+n;w[t+i>>2]=o,n+=Yt(r,o,1/0)+1,i+=4}return 0},fa:(t,e)=>{var n=pe();w[t>>2]=n.length;var i=0;for(var r of n)i+=Xt(r)+1;return w[e>>2]=i,0},ha:t=>52,$:function(t,e,n,i,r){return 70},V:(t,e,n,i)=>{for(var r=0,o=0;o<n;o++){var s=w[e>>2],a=w[e+4>>2];e+=8;for(var c=0;c<a;c++)Ae(t,v[s+c]);r+=a}return w[i>>2]=r,0},K:function(t,e,n,i){var r=N();try{return Ot(t)(e,n,i)}catch(t){if(L(r),t!==t+0)throw t;me(1,0)}},C:function(t,e,n,i,r,o){var s=N();try{return Ot(t)(e,n,i,r,o)}catch(t){if(L(s),t!==t+0)throw t;me(1,0)}},Z:function(t,e,n,i,r,o){var s=N();try{return Ot(t)(e,n,i,r,o)}catch(t){if(L(s),t!==t+0)throw t;me(1,0)}},T:function(t,e,n,i){var r=N();try{return Ot(t)(e,n,i)}catch(t){if(L(r),t!==t+0)throw t;me(1,0)}},r:function(t){var e=N();try{return Ot(t)()}catch(t){if(L(e),t!==t+0)throw t;me(1,0)}},b:function(t,e){var n=N();try{return Ot(t)(e)}catch(t){if(L(n),t!==t+0)throw t;me(1,0)}},E:function(t,e,n,i){var r=N();try{return Ot(t)(e,n,i)}catch(t){if(L(r),t!==t+0)throw t;me(1,0)}},ka:function(t,e,n){var i=N();try{return Ot(t)(e,n)}catch(t){if(L(i),t!==t+0)throw t;me(1,0)}},c:function(t,e,n){var i=N();try{return Ot(t)(e,n)}catch(t){if(L(i),t!==t+0)throw t;me(1,0)}},ja:function(t,e,n,i,r){var o=N();try{return Ot(t)(e,n,i,r)}catch(t){if(L(o),t!==t+0)throw t;me(1,0)}},h:function(t,e,n,i){var r=N();try{return Ot(t)(e,n,i)}catch(t){if(L(r),t!==t+0)throw t;me(1,0)}},i:function(t,e,n,i,r){var o=N();try{return Ot(t)(e,n,i,r)}catch(t){if(L(o),t!==t+0)throw t;me(1,0)}},q:function(t,e,n,i,r,o){var s=N();try{return Ot(t)(e,n,i,r,o)}catch(t){if(L(s),t!==t+0)throw t;me(1,0)}},P:function(t,e,n,i,r,o,s){var a=N();try{return Ot(t)(e,n,i,r,o,s)}catch(t){if(L(a),t!==t+0)throw t;me(1,0)}},v:function(t,e,n,i,r,o,s){var a=N();try{return Ot(t)(e,n,i,r,o,s)}catch(t){if(L(a),t!==t+0)throw t;me(1,0)}},F:function(t,e,n,i,r,o,s,a){var c=N();try{return Ot(t)(e,n,i,r,o,s,a)}catch(t){if(L(c),t!==t+0)throw t;me(1,0)}},L:function(t,e,n,i,r,o,s,a,c){var l=N();try{return Ot(t)(e,n,i,r,o,s,a,c)}catch(t){if(L(l),t!==t+0)throw t;me(1,0)}},z:function(t,e,n,i,r,o,s,a,c,l){var u=N();try{return Ot(t)(e,n,i,r,o,s,a,c,l)}catch(t){if(L(u),t!==t+0)throw t;me(1,0)}},J:function(t,e,n,i,r,o,s,a,c,l,u,h){var p=N();try{return Ot(t)(e,n,i,r,o,s,a,c,l,u,h)}catch(t){if(L(p),t!==t+0)throw t;me(1,0)}},aa:function(t,e,n,i,r,o,s){var a=N();try{return Pe(t,e,n,i,r,o,s)}catch(t){if(L(a),t!==t+0)throw t;me(1,0)}},_:function(t,e,n,i,r){var o=N();try{return Se(t,e,n,i,r)}catch(t){if(L(o),t!==t+0)throw t;me(1,0)}},f:function(t){var e=N();try{Ot(t)()}catch(t){if(L(e),t!==t+0)throw t;me(1,0)}},l:function(t,e){var n=N();try{Ot(t)(e)}catch(t){if(L(n),t!==t+0)throw t;me(1,0)}},e:function(t,e,n){var i=N();try{Ot(t)(e,n)}catch(t){if(L(i),t!==t+0)throw t;me(1,0)}},g:function(t,e,n,i){var r=N();try{Ot(t)(e,n,i)}catch(t){if(L(r),t!==t+0)throw t;me(1,0)}},O:function(t,e,n,i,r,o,s){var a=N();try{Ot(t)(e,n,i,r,o,s)}catch(t){if(L(a),t!==t+0)throw t;me(1,0)}},k:function(t,e,n,i,r){var o=N();try{Ot(t)(e,n,i,r)}catch(t){if(L(o),t!==t+0)throw t;me(1,0)}},la:function(t,e,n,i,r,o,s,a){var c=N();try{Ot(t)(e,n,i,r,o,s,a)}catch(t){if(L(c),t!==t+0)throw t;me(1,0)}},o:function(t,e,n,i,r,o){var s=N();try{Ot(t)(e,n,i,r,o)}catch(t){if(L(s),t!==t+0)throw t;me(1,0)}},B:function(t,e,n,i,r,o,s){var a=N();try{Ot(t)(e,n,i,r,o,s)}catch(t){if(L(a),t!==t+0)throw t;me(1,0)}},u:function(t,e,n,i,r,o,s,a){var c=N();try{Ot(t)(e,n,i,r,o,s,a)}catch(t){if(L(c),t!==t+0)throw t;me(1,0)}},W:function(t,e,n,i,r,o,s,a,c){var l=N();try{Ot(t)(e,n,i,r,o,s,a,c)}catch(t){if(L(l),t!==t+0)throw t;me(1,0)}},A:function(t,e,n,i,r,o,s,a,c,l){var u=N();try{Ot(t)(e,n,i,r,o,s,a,c,l)}catch(t){if(L(u),t!==t+0)throw t;me(1,0)}},n:function(t,e,n,i,r,o,s,a,c,l,u){var h=N();try{Ot(t)(e,n,i,r,o,s,a,c,l,u)}catch(t){if(L(h),t!==t+0)throw t;me(1,0)}},G:function(t,e,n,i,r,o,s,a,c,l,u,h,p,d,f,v){var g=N();try{Ot(t)(e,n,i,r,o,s,a,c,l,u,h,p,d,f,v)}catch(t){if(L(g),t!==t+0)throw t;me(1,0)}},y:t=>t};return Oe=await async function(){function t(t,e){return function(t){de=t.ya,fe=i._free=t.za,ve=i._malloc=t.Ba,ge=t.Ca,me=t.Da,ye=t.Ea,we=t.Fa,be=t.Ga,xe=t.Ha,Te=t.Ia,Ee=t.Ja,$t.viijii=t.Ka,Pe=$t.iiijj=t.La,$t.jiji=t.Ma,Se=$t.jiiii=t.Na,$t.iiiiij=t.Oa,$t.iiiiijj=t.Pa,$t.iiiiiijj=t.Qa,Ce=t.wa,Ie=t.Aa}(Oe=t.exports),I(),Oe}var e={a:_e};return i.instantiateWasm?new Promise(((n,r)=>{i.instantiateWasm(e,((e,i)=>{n(t(e))}))})):(null!=T||(T=A()),t((await _(h,T,e)).instance))}(),function(){function t(){var t,e;i.calledRun=!0,!S&&(C=!0,Oe.xa(),null===(t=p)||void 0===t||t(i),null===(e=i.onRuntimeInitialized)||void 0===e||e.call(i),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)D(i.postRun.shift());R(M)}())}!function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)F(i.preRun.shift());R(k)}(),i.setStatus?(i.setStatus("Running..."),setTimeout((()=>{setTimeout((()=>i.setStatus("")),1),t()}),1)):t()}(),C?i:new Promise(((t,e)=>{p=t,d=e}))}async function et(t,e){return async function(t,e,n=Y){const i={...Y,...n},r=await J(t,{fireImmediately:!0});let o,s;if("width"in e&&"height"in e&&"data"in e){const{data:t,data:{byteLength:n},width:a,height:c}=e;s=r._malloc(n),r.HEAPU8.set(t,s),o=r.readBarcodesFromPixmap(s,a,c,X(i))}else{let t,n;if("buffer"in e)[t,n]=[e.byteLength,e];else if("byteLength"in e)[t,n]=[e.byteLength,new Uint8Array(e)];else{if(!("size"in e))throw new TypeError("Invalid input type");[t,n]=[e.size,new Uint8Array(await e.arrayBuffer())]}s=r._malloc(t),r.HEAPU8.set(n,s),o=r.readBarcodesFromImage(s,t,X(i))}r._free(s);const a=[];for(let t=0;t<o.size();++t)a.push(q(o.get(t)));return a}(tt,t,e)}var nt=t=>!(!t||!t.Window)&&t instanceof t.Window;let it,rt;function ot(t){it=t;const e=t.document.createTextNode("");e.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(e)===e&&(t=t.wrap(t)),rt=t}function st(t){if(nt(t))return t;return(t.ownerDocument||t).defaultView||rt.window}"undefined"!=typeof window&&window&&ot(window);const at=t=>!!t&&"object"==typeof t,ct=t=>"function"==typeof t;var lt={window:t=>t===rt||nt(t),docFrag:t=>at(t)&&11===t.nodeType,object:at,func:ct,number:t=>"number"==typeof t,bool:t=>"boolean"==typeof t,string:t=>"string"==typeof t,element:t=>{if(!t||"object"!=typeof t)return!1;const e=st(t)||rt;return/object|function/.test(typeof Element)?t instanceof Element||t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName},plainObject:t=>at(t)&&!!t.constructor&&/function Object\b/.test(t.constructor.toString()),array:t=>at(t)&&void 0!==t.length&&ct(t.splice)};function ut(t){let{interaction:e}=t;if("drag"!==e.prepared.name)return;const n=e.prepared.axis;"x"===n?(e.coords.cur.page.y=e.coords.start.page.y,e.coords.cur.client.y=e.coords.start.client.y,e.coords.velocity.client.y=0,e.coords.velocity.page.y=0):"y"===n&&(e.coords.cur.page.x=e.coords.start.page.x,e.coords.cur.client.x=e.coords.start.client.x,e.coords.velocity.client.x=0,e.coords.velocity.page.x=0)}function ht(t){let{iEvent:e,interaction:n}=t;if("drag"!==n.prepared.name)return;const i=n.prepared.axis;if("x"===i||"y"===i){const t="x"===i?"y":"x";e.page[t]=n.coords.start.page[t],e.client[t]=n.coords.start.client[t],e.delta[t]=0}}const pt={id:"actions/drag",install:function(t){const{actions:e,Interactable:n,defaults:i}=t;n.prototype.draggable=pt.draggable,e.map.drag=pt,e.methodDict.drag="draggable",i.actions.drag=pt.defaults},listeners:{"interactions:before-action-move":ut,"interactions:action-resume":ut,"interactions:action-move":ht,"auto-start:check":t=>{const{interaction:e,interactable:n,buttons:i}=t,r=n.options.drag;if(r&&r.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||i&n.options.drag.mouseButtons))return t.action={name:"drag",axis:"start"===r.lockAxis?r.startAxis:r.lockAxis},!1}},draggable:function(t){return lt.object(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):lt.bool(t)?(this.options.drag.enabled=t,this):this.options.drag},beforeMove:ut,move:ht,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:()=>"move",filterEventType:t=>0===t.search("drag")},dt={init:function(t){const e=t;dt.document=e.document,dt.DocumentFragment=e.DocumentFragment||ft,dt.SVGElement=e.SVGElement||ft,dt.SVGSVGElement=e.SVGSVGElement||ft,dt.SVGElementInstance=e.SVGElementInstance||ft,dt.Element=e.Element||ft,dt.HTMLElement=e.HTMLElement||dt.Element,dt.Event=e.Event,dt.Touch=e.Touch||ft,dt.PointerEvent=e.PointerEvent||e.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function ft(){}const vt={init:function(t){const e=dt.Element,n=t.navigator||{};vt.supportsTouch="ontouchstart"in t||lt.func(t.DocumentTouch)&&dt.document instanceof t.DocumentTouch,vt.supportsPointerEvent=!1!==n.pointerEnabled&&!!dt.PointerEvent,vt.isIOS=/iP(hone|od|ad)/.test(n.platform),vt.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),vt.isIe9=/MSIE 9/.test(n.userAgent),vt.isOperaMobile="Opera"===n.appName&&vt.supportsTouch&&/Presto/.test(n.userAgent),vt.prefixedMatchesSelector="matches"in e.prototype?"matches":"webkitMatchesSelector"in e.prototype?"webkitMatchesSelector":"mozMatchesSelector"in e.prototype?"mozMatchesSelector":"oMatchesSelector"in e.prototype?"oMatchesSelector":"msMatchesSelector",vt.pEventTypes=vt.supportsPointerEvent?dt.PointerEvent===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,vt.wheelEvent=dt.document&&"onmousewheel"in dt.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null};const gt=(t,e)=>{for(const n of e)t.push(n);return t},mt=t=>gt([],t),yt=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1},wt=(t,e)=>t[yt(t,e)];function bt(t){const e={};for(const n in t){const i=t[n];lt.plainObject(i)?e[n]=bt(i):lt.array(i)?e[n]=mt(i):e[n]=i}return e}function xt(t,e){for(const n in e)t[n]=e[n];return t}let Tt,Et,Pt=0;var St={request:t=>Tt(t),cancel:t=>Et(t),init:function(t){if(Tt=t.requestAnimationFrame,Et=t.cancelAnimationFrame,!Tt){const e=["ms","moz","webkit","o"];for(const n of e)Tt=t[`${n}RequestAnimationFrame`],Et=t[`${n}CancelAnimationFrame`]||t[`${n}CancelRequestAnimationFrame`]}Tt=Tt&&Tt.bind(t),Et=Et&&Et.bind(t),Tt||(Tt=e=>{const n=Date.now(),i=Math.max(0,16-(n-Pt)),r=t.setTimeout((()=>{e(n+i)}),i);return Pt=n+i,r},Et=t=>clearTimeout(t))}};function Ct(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t=>!0,i=arguments.length>3?arguments[3]:void 0;if(i=i||{},lt.string(t)&&-1!==t.search(" ")&&(t=It(t)),lt.array(t))return t.forEach((t=>Ct(t,e,n,i))),i;if(lt.object(t)&&(e=t,t=""),lt.func(e)&&n(t))i[t]=i[t]||[],i[t].push(e);else if(lt.array(e))for(const r of e)Ct(t,r,n,i);else if(lt.object(e))for(const r in e){const o=It(r).map((e=>`${t}${e}`));Ct(o,e[r],n,i)}return i}function It(t){return t.trim().split(/ +/)}function $t(t,e){for(const n of e){if(t.immediatePropagationStopped)break;n(t)}}class At{constructor(t){this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=xt({},t||{})}fire(t){let e;const n=this.global;(e=this.types[t.type])&&$t(t,e),!t.propagationStopped&&n&&(e=n[t.type])&&$t(t,e)}on(t,e){const n=Ct(t,e);for(t in n)this.types[t]=gt(this.types[t]||[],n[t])}off(t,e){const n=Ct(t,e);for(t in n){const e=this.types[t];if(e&&e.length)for(const i of n[t]){const t=e.indexOf(i);-1!==t&&e.splice(t,1)}}}getRect(t){return null}}function Ot(t,e){if(t.contains)return t.contains(e);for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function _t(t,e){for(;lt.element(t);){if(Mt(t,e))return t;t=Rt(t)}return null}function Rt(t){let e=t.parentNode;if(lt.docFrag(e)){for(;(e=e.host)&&lt.docFrag(e););return e}return e}function Mt(t,e){return rt!==it&&(e=e.replace(/\/deep\//g," ")),t[vt.prefixedMatchesSelector](e)}function Dt(t,e,n){for(;lt.element(t);){if(Mt(t,e))return!0;if((t=Rt(t))===n)return Mt(t,e)}return!1}function kt(t){return t.correspondingUseElement||t}function Ft(t){const e=t instanceof dt.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}function Lt(t){const e=Ft(t);if(!vt.isIOS7&&e){const i={x:(n=(n=st(t))||rt).scrollX||n.document.documentElement.scrollLeft,y:n.scrollY||n.document.documentElement.scrollTop};e.left+=i.x,e.right+=i.x,e.top+=i.y,e.bottom+=i.y}var n;return e}function Nt(t){return!!lt.string(t)&&(dt.document.querySelector(t),!0)}const Ut=["webkit","moz"];function Ht(t,e){t.__set||(t.__set={});for(const n in e)Ut.some((t=>0===n.indexOf(t)))||"function"!=typeof t[n]&&"__set"!==n&&Object.defineProperty(t,n,{get:()=>n in t.__set?t.__set[n]:t.__set[n]=e[n],set(e){t.__set[n]=e},configurable:!0});return t}var jt=(t,e)=>Math.sqrt(t*t+e*e);function Wt(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp}function Gt(t){return t instanceof dt.Event||t instanceof dt.Touch}function Vt(t,e,n){return t=t||"page",(n=n||{}).x=e[t+"X"],n.y=e[t+"Y"],n}function zt(t){return lt.number(t.pointerId)?t.pointerId:t.identifier}function Bt(t,e,n){const i=e.length>1?Xt(e):e[0];!function(t,e){e=e||{x:0,y:0},vt.isOperaMobile&&Gt(t)?(Vt("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):Vt("page",t,e)}(i,t.page),function(t,e){e=e||{},vt.isOperaMobile&&Gt(t)?Vt("screen",t,e):Vt("client",t,e)}(i,t.client),t.timeStamp=n}function Yt(t){const e=[];return lt.array(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function Xt(t){const e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0};for(const n of t)for(const t in e)e[t]+=n[t];for(const n in e)e[n]/=t.length;return e}function qt(t){if(!t.length)return null;const e=Yt(t),n=Math.min(e[0].pageX,e[1].pageX),i=Math.min(e[0].pageY,e[1].pageY),r=Math.max(e[0].pageX,e[1].pageX),o=Math.max(e[0].pageY,e[1].pageY);return{x:n,y:i,left:n,top:i,right:r,bottom:o,width:r-n,height:o-i}}function Kt(t,e){const n=e+"X",i=e+"Y",r=Yt(t),o=r[0][n]-r[1][n],s=r[0][i]-r[1][i];return jt(o,s)}function Qt(t,e){const n=e+"X",i=e+"Y",r=Yt(t),o=r[1][n]-r[0][n],s=r[1][i]-r[0][i];return 180*Math.atan2(s,o)/Math.PI}function Zt(t){const e=lt.func(t.composedPath)?t.composedPath():t.path;return[kt(e?e[0]:t.target),kt(t.currentTarget)]}class Jt{constructor(t){this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=t,Ht(this,t)}preventOriginalDefault(){this.originalEvent.preventDefault()}stopPropagation(){this.originalEvent.stopPropagation()}stopImmediatePropagation(){this.originalEvent.stopImmediatePropagation()}}function te(t){return lt.object(t)?{capture:!!t.capture,passive:!!t.passive}:{capture:!!t,passive:!1}}function ee(t,e){return t===e||("boolean"==typeof t?!!e.capture===t&&!1==!!e.passive:!!t.capture==!!e.capture&&!!t.passive==!!e.passive)}var ne={id:"events",install:function(t){var e;const n=[],i={},r=[],o={add:s,remove:a,addDelegate:function(t,e,n,o,a){const u=te(a);if(!i[n]){i[n]=[];for(const t of r)s(t,n,c),s(t,n,l,!0)}const h=i[n];let p=wt(h,(n=>n.selector===t&&n.context===e));p||(p={selector:t,context:e,listeners:[]},h.push(p));p.listeners.push({func:o,options:u})},removeDelegate:function(t,e,n,r,o){const s=te(o),u=i[n];let h,p=!1;if(!u)return;for(h=u.length-1;h>=0;h--){const i=u[h];if(i.selector===t&&i.context===e){const{listeners:t}=i;for(let i=t.length-1;i>=0;i--){const o=t[i];if(o.func===r&&ee(o.options,s)){t.splice(i,1),t.length||(u.splice(h,1),a(e,n,c),a(e,n,l,!0)),p=!0;break}}if(p)break}}},delegateListener:c,delegateUseCapture:l,delegatedEvents:i,documents:r,targets:n,supportsOptions:!1,supportsPassive:!1};function s(t,e,i,r){if(!t.addEventListener)return;const s=te(r);let a=wt(n,(e=>e.eventTarget===t));a||(a={eventTarget:t,events:{}},n.push(a)),a.events[e]||(a.events[e]=[]),wt(a.events[e],(t=>t.func===i&&ee(t.options,s)))||(t.addEventListener(e,i,o.supportsOptions?s:s.capture),a.events[e].push({func:i,options:s}))}function a(t,e,i,r){if(!t.addEventListener||!t.removeEventListener)return;const s=yt(n,(e=>e.eventTarget===t)),c=n[s];if(!c||!c.events)return;if("all"===e){for(e in c.events)c.events.hasOwnProperty(e)&&a(t,e,"all");return}let l=!1;const u=c.events[e];if(u){if("all"===i){for(let n=u.length-1;n>=0;n--){const i=u[n];a(t,e,i.func,i.options)}return}{const n=te(r);for(let r=0;r<u.length;r++){const s=u[r];if(s.func===i&&ee(s.options,n)){t.removeEventListener(e,i,o.supportsOptions?n:n.capture),u.splice(r,1),0===u.length&&(delete c.events[e],l=!0);break}}}}l&&!Object.keys(c.events).length&&n.splice(s,1)}function c(t,e){const n=te(e),r=new Jt(t),o=i[t.type],[s]=Zt(t);let a=s;for(;lt.element(a);){for(let t=0;t<o.length;t++){const e=o[t],{selector:i,context:c}=e;if(Mt(a,i)&&Ot(c,s)&&Ot(c,a)){const{listeners:t}=e;r.currentTarget=a;for(const e of t)ee(e.options,n)&&e.func(r)}}a=Rt(a)}}function l(t){return c.call(this,t,!0)}return null==(e=t.document)||e.createElement("div").addEventListener("test",null,{get capture(){return o.supportsOptions=!0},get passive(){return o.supportsPassive=!0}}),t.events=o,o}};const ie=function(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):lt.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault};function re(t){let{interaction:e,event:n}=t;e.interactable&&e.interactable.checkAndPreventDefault(n)}var oe={id:"core/interactablePreventDefault",install:function(t){const{Interactable:e}=t;e.prototype.preventDefault=ie,e.prototype.checkAndPreventDefault=function(e){return function(t,e,n){const i=t.options.preventDefault;if("never"!==i)if("always"!==i){if(e.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){const t=st(n.target).document,i=e.getDocOptions(t);if(!i||!i.events||!1!==i.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||lt.element(n.target)&&Mt(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,t,e)},t.interactions.docEvents.push({type:"dragstart",listener(e){for(const n of t.interactions.list)if(n.element&&(n.element===e.target||Ot(n.element,e.target)))return void n.interactable.checkAndPreventDefault(e)}})},listeners:["down","move","up","cancel"].reduce(((t,e)=>(t[`interactions:${e}`]=re,t)),{})};function se(t,e){let n=!1;return function(){return n||(rt.console.warn(e),n=!0),t.apply(this,arguments)}}function ae(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t}function ce(t,e,n,i){let r=t;return lt.string(r)?r=function(t,e,n){return"parent"===t?Rt(n):"self"===t?e.getRect(n):_t(n,t)}(r,e,n):lt.func(r)&&(r=r(...i)),lt.element(r)&&(r=Lt(r)),r}class le{constructor(t){this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=t}preventDefault(){}stopPropagation(){this.propagationStopped=!0}stopImmediatePropagation(){this.immediatePropagationStopped=this.propagationStopped=!0}}Object.defineProperty(le.prototype,"interaction",{get(){return this._interaction._proxy},set(){}});const ue={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};class he extends le{constructor(t,e,n,i,r,o,s){super(t),this.relatedTarget=null,this.screenX=void 0,this.screenY=void 0,this.button=void 0,this.buttons=void 0,this.ctrlKey=void 0,this.shiftKey=void 0,this.altKey=void 0,this.metaKey=void 0,this.page=void 0,this.client=void 0,this.delta=void 0,this.rect=void 0,this.x0=void 0,this.y0=void 0,this.t0=void 0,this.dt=void 0,this.duration=void 0,this.clientX0=void 0,this.clientY0=void 0,this.velocity=void 0,this.speed=void 0,this.swipe=void 0,this.axes=void 0,this.preEnd=void 0,r=r||t.element;const a=t.interactable,c=(a&&a.options||ue).deltaSource,l=function(t,e,n){const i=n&&t.options[n],r=ce(i&&i.origin||t.options.origin,t,e,[t&&e]);return(o=r)&&{x:"x"in o?o.x:o.left,y:"y"in o?o.y:o.top}||{x:0,y:0};var o}(a,r,n),u="start"===i,h="end"===i,p=u?this:t.prevEvent,d=u?t.coords.start:h?{page:p.page,client:p.client,timeStamp:t.coords.cur.timeStamp}:t.coords.cur;this.page=xt({},d.page),this.client=xt({},d.client),this.rect=xt({},t.rect),this.timeStamp=d.timeStamp,h||(this.page.x-=l.x,this.page.y-=l.y,this.client.x-=l.x,this.client.y-=l.y),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.buttons=e.buttons,this.target=r,this.currentTarget=r,this.preEnd=o,this.type=s||n+(i||""),this.interactable=a,this.t0=u?t.pointers[t.pointers.length-1].downTime:p.t0,this.x0=t.coords.start.page.x-l.x,this.y0=t.coords.start.page.y-l.y,this.clientX0=t.coords.start.client.x-l.x,this.clientY0=t.coords.start.client.y-l.y,this.delta=u||h?{x:0,y:0}:{x:this[c].x-p[c].x,y:this[c].y-p[c].y},this.dt=t.coords.delta.timeStamp,this.duration=this.timeStamp-this.t0,this.velocity=xt({},t.coords.velocity[c]),this.speed=jt(this.velocity.x,this.velocity.y),this.swipe=h||"inertiastart"===i?this.getSwipe():null}getSwipe(){const t=this._interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150)return null;let e=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;e<0&&(e+=360);const n=112.5<=e&&e<247.5,i=202.5<=e&&e<337.5;return{up:i,down:!i&&22.5<=e&&e<157.5,left:n,right:!n&&(292.5<=e||e<67.5),angle:e,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}preventDefault(){}stopImmediatePropagation(){this.immediatePropagationStopped=this.propagationStopped=!0}stopPropagation(){this.propagationStopped=!0}}Object.defineProperties(he.prototype,{pageX:{get(){return this.page.x},set(t){this.page.x=t}},pageY:{get(){return this.page.y},set(t){this.page.y=t}},clientX:{get(){return this.client.x},set(t){this.client.x=t}},clientY:{get(){return this.client.y},set(t){this.client.y=t}},dx:{get(){return this.delta.x},set(t){this.delta.x=t}},dy:{get(){return this.delta.y},set(t){this.delta.y=t}},velocityX:{get(){return this.velocity.x},set(t){this.velocity.x=t}},velocityY:{get(){return this.velocity.y},set(t){this.velocity.y=t}}});class pe{constructor(t,e,n,i,r){this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=t,this.pointer=e,this.event=n,this.downTime=i,this.downTarget=r}}let de=function(t){return t.interactable="",t.element="",t.prepared="",t.pointerIsDown="",t.pointerWasMoved="",t._proxy="",t}({}),fe=function(t){return t.start="",t.move="",t.end="",t.stop="",t.interacting="",t}({}),ve=0;class ge{get pointerMoveTolerance(){return 1}constructor(t){this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=se((function(t){this.move(t)}),"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=ve++;let{pointerType:e,scopeFire:n}=t;this._scopeFire=n,this.pointerType=e;const i=this;this._proxy={};for(const t in de)Object.defineProperty(this._proxy,t,{get:()=>i[t]});for(const t in fe)Object.defineProperty(this._proxy,t,{value:function(){return i[t](...arguments)}});this._scopeFire("interactions:new",{interaction:this})}pointerDown(t,e,n){const i=this.updatePointer(t,e,n,!0),r=this.pointers[i];this._scopeFire("interactions:down",{pointer:t,event:e,eventTarget:n,pointerIndex:i,pointerInfo:r,type:"down",interaction:this})}start(t,e,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===t.name?2:1)||!e.options[t.name].enabled)&&(ae(this.prepared,t),this.interactable=e,this.element=n,this.rect=e.getRect(n),this.edges=this.prepared.edges?xt({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}pointerMove(t,e,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(t,e,n,!1);const i=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;let r,o;this.pointerIsDown&&!this.pointerWasMoved&&(r=this.coords.cur.client.x-this.coords.start.client.x,o=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=jt(r,o)>this.pointerMoveTolerance);const s=this.getPointerIndex(t),a={pointer:t,pointerIndex:s,pointerInfo:this.pointers[s],event:e,type:"move",eventTarget:n,dx:r,dy:o,duplicate:i,interaction:this};i||function(t,e){const n=Math.max(e.timeStamp/1e3,.001);t.page.x=e.page.x/n,t.page.y=e.page.y/n,t.client.x=e.client.x/n,t.client.y=e.client.y/n,t.timeStamp=n}(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",a),i||this.simulation||(this.interacting()&&(a.type=null,this.move(a)),this.pointerWasMoved&&Wt(this.coords.prev,this.coords.cur))}move(t){var e;t&&t.event||((e=this.coords.delta).page.x=0,e.page.y=0,e.client.x=0,e.client.y=0),(t=xt({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{})).phase="move",this._doPhase(t)}pointerUp(t,e,n,i){let r=this.getPointerIndex(t);-1===r&&(r=this.updatePointer(t,e,n,!1));const o=/cancel$/i.test(e.type)?"cancel":"up";this._scopeFire(`interactions:${o}`,{pointer:t,pointerIndex:r,pointerInfo:this.pointers[r],event:e,eventTarget:n,type:o,curEventTarget:i,interaction:this}),this.simulation||this.end(e),this.removePointer(t,e)}documentBlur(t){this.end(t),this._scopeFire("interactions:blur",{event:t,type:"blur",interaction:this})}end(t){let e;this._ending=!0,t=t||this._latestPointer.event,this.interacting()&&(e=this._doPhase({event:t,interaction:this,phase:"end"})),this._ending=!1,!0===e&&this.stop()}currentAction(){return this._interacting?this.prepared.name:null}interacting(){return this._interacting}stop(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}getPointerIndex(t){const e=zt(t);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:yt(this.pointers,(t=>t.id===e))}getPointerInfo(t){return this.pointers[this.getPointerIndex(t)]}updatePointer(t,e,n,i){const r=zt(t);let o=this.getPointerIndex(t),s=this.pointers[o];var a,c,l;return i=!1!==i&&(i||/(down|start)$/i.test(e.type)),s?s.pointer=t:(s=new pe(r,t,e,null,null),o=this.pointers.length,this.pointers.push(s)),Bt(this.coords.cur,this.pointers.map((t=>t.pointer)),this._now()),a=this.coords.delta,c=this.coords.prev,l=this.coords.cur,a.page.x=l.page.x-c.page.x,a.page.y=l.page.y-c.page.y,a.client.x=l.client.x-c.client.x,a.client.y=l.client.y-c.client.y,a.timeStamp=l.timeStamp-c.timeStamp,i&&(this.pointerIsDown=!0,s.downTime=this.coords.cur.timeStamp,s.downTarget=n,Ht(this.downPointer,t),this.interacting()||(Wt(this.coords.start,this.coords.cur),Wt(this.coords.prev,this.coords.cur),this.downEvent=e,this.pointerWasMoved=!1)),this._updateLatestPointer(t,e,n),this._scopeFire("interactions:update-pointer",{pointer:t,event:e,eventTarget:n,down:i,pointerInfo:s,pointerIndex:o,interaction:this}),o}removePointer(t,e){const n=this.getPointerIndex(t);if(-1===n)return;const i=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:t,event:e,eventTarget:null,pointerIndex:n,pointerInfo:i,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}_updateLatestPointer(t,e,n){this._latestPointer.pointer=t,this._latestPointer.event=e,this._latestPointer.eventTarget=n}destroy(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}_createPreparedEvent(t,e,n,i){return new he(this,t,this.prepared.name,e,this.element,n,i)}_fireEvent(t){var e;null==(e=this.interactable)||e.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)}_doPhase(t){const{event:e,phase:n,preEnd:i,type:r}=t,{rect:o}=this;o&&"move"===n&&(!function(t,e,n){t.left&&(e.left+=n.x),t.right&&(e.right+=n.x),t.top&&(e.top+=n.y),t.bottom&&(e.bottom+=n.y),e.width=e.right-e.left,e.height=e.bottom-e.top}(this.edges,o,this.coords.delta[this.interactable.options.deltaSource]),o.width=o.right-o.left,o.height=o.bottom-o.top);if(!1===this._scopeFire(`interactions:before-action-${n}`,t))return!1;const s=t.iEvent=this._createPreparedEvent(e,n,i,r);return this._scopeFire(`interactions:action-${n}`,t),"start"===n&&(this.prevEvent=s),this._fireEvent(s),this._scopeFire(`interactions:after-action-${n}`,t),!0}_now(){return Date.now()}}const me={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search(t){for(const e of me.methodOrder){const n=me[e](t);if(n)return n}return null},simulationResume(t){let{pointerType:e,eventType:n,eventTarget:i,scope:r}=t;if(!/down|start/i.test(n))return null;for(const t of r.interactions.list){let n=i;if(t.simulation&&t.simulation.allowResume&&t.pointerType===e)for(;n;){if(n===t.element)return t;n=Rt(n)}}return null},mouseOrPen(t){let e,{pointerId:n,pointerType:i,eventType:r,scope:o}=t;if("mouse"!==i&&"pen"!==i)return null;for(const t of o.interactions.list)if(t.pointerType===i){if(t.simulation&&!ye(t,n))continue;if(t.interacting())return t;e||(e=t)}if(e)return e;for(const t of o.interactions.list)if(!(t.pointerType!==i||/down/i.test(r)&&t.simulation))return t;return null},hasPointer(t){let{pointerId:e,scope:n}=t;for(const t of n.interactions.list)if(ye(t,e))return t;return null},idle(t){let{pointerType:e,scope:n}=t;for(const t of n.interactions.list){if(1===t.pointers.length){const e=t.interactable;if(e&&(!e.options.gesture||!e.options.gesture.enabled))continue}else if(t.pointers.length>=2)continue;if(!t.interacting()&&e===t.pointerType)return t}return null}};function ye(t,e){return t.pointers.some((t=>{let{id:n}=t;return n===e}))}const we=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function be(t,e){return function(n){const i=e.interactions.list,r=(o=n,lt.string(o.pointerType)?o.pointerType:lt.number(o.pointerType)?[void 0,void 0,"touch","pen","mouse"][o.pointerType]:/touch/.test(o.type||"")||o instanceof dt.Touch?"touch":"mouse");var o;const[s,a]=Zt(n),c=[];if(/^touch/.test(n.type)){e.prevTouchTime=e.now();for(const t of n.changedTouches){const i={pointer:t,pointerId:zt(t),pointerType:r,eventType:n.type,eventTarget:s,curEventTarget:a,scope:e},o=xe(i);c.push([i.pointer,i.eventTarget,i.curEventTarget,o])}}else{let t=!1;if(!vt.supportsPointerEvent&&/mouse/.test(n.type)){for(let e=0;e<i.length&&!t;e++)t="mouse"!==i[e].pointerType&&i[e].pointerIsDown;t=t||e.now()-e.prevTouchTime<500||0===n.timeStamp}if(!t){const t={pointer:n,pointerId:zt(n),pointerType:r,eventType:n.type,curEventTarget:a,eventTarget:s,scope:e},i=xe(t);c.push([t.pointer,t.eventTarget,t.curEventTarget,i])}}for(const[e,i,r,o]of c)o[t](e,n,i,r)}}function xe(t){const{pointerType:e,scope:n}=t,i={interaction:me.search(t),searchDetails:t};return n.fire("interactions:find",i),i.interaction||n.interactions.new({pointerType:e})}function Te(t,e){let{doc:n,scope:i,options:r}=t;const{interactions:{docEvents:o},events:s}=i,a=s[e];i.browser.isIOS&&!r.events&&(r.events={passive:!1});for(const t in s.delegatedEvents)a(n,t,s.delegateListener),a(n,t,s.delegateUseCapture,!0);const c=r&&r.events;for(const{type:t,listener:e}of o)a(n,t,e,c)}const Ee={id:"core/interactions",install:function(t){const e={};for(const n of we)e[n]=be(n,t);const n=vt.pEventTypes;let i;function r(){for(const e of t.interactions.list)if(e.pointerIsDown&&"touch"===e.pointerType&&!e._interacting)for(const n of e.pointers)t.documents.some((t=>{let{doc:e}=t;return Ot(e,n.downTarget)}))||e.removePointer(n.pointer,n.event)}i=dt.PointerEvent?[{type:n.down,listener:r},{type:n.down,listener:e.pointerDown},{type:n.move,listener:e.pointerMove},{type:n.up,listener:e.pointerUp},{type:n.cancel,listener:e.pointerUp}]:[{type:"mousedown",listener:e.pointerDown},{type:"mousemove",listener:e.pointerMove},{type:"mouseup",listener:e.pointerUp},{type:"touchstart",listener:r},{type:"touchstart",listener:e.pointerDown},{type:"touchmove",listener:e.pointerMove},{type:"touchend",listener:e.pointerUp},{type:"touchcancel",listener:e.pointerUp}],i.push({type:"blur",listener(e){for(const n of t.interactions.list)n.documentBlur(e)}}),t.prevTouchTime=0,t.Interaction=class extends ge{get pointerMoveTolerance(){return t.interactions.pointerMoveTolerance}set pointerMoveTolerance(e){t.interactions.pointerMoveTolerance=e}_now(){return t.now()}},t.interactions={list:[],new(e){e.scopeFire=(e,n)=>t.fire(e,n);const n=new t.Interaction(e);return t.interactions.list.push(n),n},listeners:e,docEvents:i,pointerMoveTolerance:1},t.usePlugin(oe)},listeners:{"scope:add-document":t=>Te(t,"add"),"scope:remove-document":t=>Te(t,"remove"),"interactable:unset":(t,e)=>{let{interactable:n}=t;for(let t=e.interactions.list.length-1;t>=0;t--){const i=e.interactions.list[t];i.interactable===n&&(i.stop(),e.fire("interactions:destroy",{interaction:i}),i.destroy(),e.interactions.list.length>2&&e.interactions.list.splice(t,1))}}},onDocSignal:Te,doOnInteractions:be,methodNames:we};function Pe(t,e){if(e.phaselessTypes[t])return!0;for(const n in e.map)if(0===t.indexOf(n)&&t.substr(n.length)in e.phases)return!0;return!1}var Se=function(t){return t[t.On=0]="On",t[t.Off=1]="Off",t}(Se||{});class Ce{get _defaults(){return{base:{},perAction:{},actions:{}}}constructor(t,e,n,i){this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new At,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=e.actions,this.target=t,this._context=e.context||n,this._win=st(Nt(t)?this._context:t),this._doc=this._win.document,this._scopeEvents=i,this.set(e)}setOnEvents(t,e){return lt.func(e.onstart)&&this.on(`${t}start`,e.onstart),lt.func(e.onmove)&&this.on(`${t}move`,e.onmove),lt.func(e.onend)&&this.on(`${t}end`,e.onend),lt.func(e.oninertiastart)&&this.on(`${t}inertiastart`,e.oninertiastart),this}updatePerActionListeners(t,e,n){var i;const r=null==(i=this._actions.map[t])?void 0:i.filterEventType,o=t=>(null==r||r(t))&&Pe(t,this._actions);(lt.array(e)||lt.object(e))&&this._onOff(Se.Off,t,e,void 0,o),(lt.array(n)||lt.object(n))&&this._onOff(Se.On,t,n,void 0,o)}setPerAction(t,e){const n=this._defaults;for(const i in e){const r=i,o=this.options[t],s=e[r];"listeners"===r&&this.updatePerActionListeners(t,o.listeners,s),lt.array(s)?o[r]=mt(s):lt.plainObject(s)?(o[r]=xt(o[r]||{},bt(s)),lt.object(n.perAction[r])&&"enabled"in n.perAction[r]&&(o[r].enabled=!1!==s.enabled)):lt.bool(s)&&lt.object(n.perAction[r])?o[r].enabled=s:o[r]=s}}getRect(t){return t=t||(lt.element(this.target)?this.target:null),lt.string(this.target)&&(t=t||this._context.querySelector(this.target)),Lt(t)}rectChecker(t){return lt.func(t)?(this.getRect=e=>{const n=xt({},t.apply(this,e));return"width"in n||(n.width=n.right-n.left,n.height=n.bottom-n.top),n},this):null===t?(delete this.getRect,this):this.getRect}_backCompatOption(t,e){if(Nt(e)||lt.object(e)){this.options[t]=e;for(const n in this._actions.map)this.options[n][t]=e;return this}return this.options[t]}origin(t){return this._backCompatOption("origin",t)}deltaSource(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource}getAllElements(){const{target:t}=this;return lt.string(t)?Array.from(this._context.querySelectorAll(t)):lt.func(t)&&t.getAllElements?t.getAllElements():lt.element(t)?[t]:[]}context(){return this._context}inContext(t){return this._context===t.ownerDocument||Ot(this._context,t)}testIgnoreAllow(t,e,n){return!this.testIgnore(t.ignoreFrom,e,n)&&this.testAllow(t.allowFrom,e,n)}testAllow(t,e,n){return!t||!!lt.element(n)&&(lt.string(t)?Dt(n,t,e):!!lt.element(t)&&Ot(t,n))}testIgnore(t,e,n){return!(!t||!lt.element(n))&&(lt.string(t)?Dt(n,t,e):!!lt.element(t)&&Ot(t,n))}fire(t){return this.events.fire(t),this}_onOff(t,e,n,i,r){lt.object(e)&&!lt.array(e)&&(i=n,n=null);const o=Ct(e,n,r);for(let e in o){"wheel"===e&&(e=vt.wheelEvent);for(const n of o[e])Pe(e,this._actions)?this.events[t===Se.On?"on":"off"](e,n):lt.string(this.target)?this._scopeEvents[t===Se.On?"addDelegate":"removeDelegate"](this.target,this._context,e,n,i):this._scopeEvents[t===Se.On?"add":"remove"](this.target,e,n,i)}return this}on(t,e,n){return this._onOff(Se.On,t,e,n)}off(t,e,n){return this._onOff(Se.Off,t,e,n)}set(t){const e=this._defaults;lt.object(t)||(t={}),this.options=bt(e.base);for(const n in this._actions.methodDict){const i=n,r=this._actions.methodDict[i];this.options[i]={},this.setPerAction(i,xt(xt({},e.perAction),e.actions[i])),this[r](t[i])}for(const e in t)"getRect"!==e?lt.func(this[e])&&this[e](t[e]):this.rectChecker(t.getRect);return this}unset(){if(lt.string(this.target))for(const t in this._scopeEvents.delegatedEvents){const e=this._scopeEvents.delegatedEvents[t];for(let n=e.length-1;n>=0;n--){const{selector:i,context:r,listeners:o}=e[n];i===this.target&&r===this._context&&e.splice(n,1);for(let e=o.length-1;e>=0;e--)this._scopeEvents.removeDelegate(this.target,this._context,t,o[e][0],o[e][1])}}else this._scopeEvents.remove(this.target,"all")}}class Ie{constructor(t){this.list=[],this.selectorMap={},this.scope=void 0,this.scope=t,t.addListeners({"interactable:unset":t=>{let{interactable:e}=t;const{target:n}=e,i=lt.string(n)?this.selectorMap[n]:n[this.scope.id],r=yt(i,(t=>t===e));i.splice(r,1)}})}new(t,e){e=xt(e||{},{actions:this.scope.actions});const n=new this.scope.Interactable(t,e,this.scope.document,this.scope.events);return this.scope.addDocument(n._doc),this.list.push(n),lt.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(n)):(n.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(n)),this.scope.fire("interactable:new",{target:t,options:e,interactable:n,win:this.scope._win}),n}getExisting(t,e){const n=e&&e.context||this.scope.document,i=lt.string(t),r=i?this.selectorMap[t]:t[this.scope.id];if(r)return wt(r,(e=>e._context===n&&(i||e.inContext(t))))}forEachMatch(t,e){for(const n of this.list){let i;if((lt.string(n.target)?lt.element(t)&&Mt(t,n.target):t===n.target)&&n.inContext(t)&&(i=e(n)),void 0!==i)return i}}}function $e(t){return t&&t.replace(/\/.*$/,"")}const Ae=new class{constructor(){this.id=`__interact_scope_${Math.floor(100*Math.random())}`,this.isInitialized=!1,this.listenerMaps=[],this.browser=vt,this.defaults=bt(ue),this.Eventable=At,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(t){const e=(n,i)=>{let r=t.interactables.getExisting(n,i);return r||(r=t.interactables.new(n,i),r.events.global=e.globalEvents),r};return e.getPointerAverage=Xt,e.getTouchBBox=qt,e.getTouchDistance=Kt,e.getTouchAngle=Qt,e.getElementRect=Lt,e.getElementClientRect=Ft,e.matchesSelector=Mt,e.closest=_t,e.globalEvents={},e.version="1.10.27",e.scope=t,e.use=function(t,e){return this.scope.usePlugin(t,e),this},e.isSet=function(t,e){return!!this.scope.interactables.get(t,e&&e.context)},e.on=se((function(t,e,n){if(lt.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),lt.array(t)){for(const i of t)this.on(i,e,n);return this}if(lt.object(t)){for(const n in t)this.on(n,t[n],e);return this}return Pe(t,this.scope.actions)?this.globalEvents[t]?this.globalEvents[t].push(e):this.globalEvents[t]=[e]:this.scope.events.add(this.scope.document,t,e,{options:n}),this}),"The interact.on() method is being deprecated"),e.off=se((function(t,e,n){if(lt.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),lt.array(t)){for(const i of t)this.off(i,e,n);return this}if(lt.object(t)){for(const n in t)this.off(n,t[n],e);return this}if(Pe(t,this.scope.actions)){let n;t in this.globalEvents&&-1!==(n=this.globalEvents[t].indexOf(e))&&this.globalEvents[t].splice(n,1)}else this.scope.events.remove(this.scope.document,t,e,n);return this}),"The interact.off() method is being deprecated"),e.debug=function(){return this.scope},e.supportsTouch=function(){return vt.supportsTouch},e.supportsPointerEvent=function(){return vt.supportsPointerEvent},e.stop=function(){for(const t of this.scope.interactions.list)t.stop();return this},e.pointerMoveTolerance=function(t){return lt.number(t)?(this.scope.interactions.pointerMoveTolerance=t,this):this.scope.interactions.pointerMoveTolerance},e.addDocument=function(t,e){this.scope.addDocument(t,e)},e.removeDocument=function(t){this.scope.removeDocument(t)},e}(this),this.InteractEvent=he,this.Interactable=void 0,this.interactables=new Ie(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=t=>this.removeDocument(t.target);const t=this;this.Interactable=class extends Ce{get _defaults(){return t.defaults}set(e){return super.set(e),t.fire("interactable:set",{options:e,interactable:this}),this}unset(){super.unset();const e=t.interactables.list.indexOf(this);e<0||(t.interactables.list.splice(e,1),t.fire("interactable:unset",{interactable:this}))}}}addListeners(t,e){this.listenerMaps.push({id:e,map:t})}fire(t,e){for(const{map:{[t]:n}}of this.listenerMaps)if(n&&!1===n(e,this,t))return!1}init(t){return this.isInitialized?this:function(t,e){t.isInitialized=!0,lt.window(e)&&ot(e);return dt.init(e),vt.init(e),St.init(e),t.window=e,t.document=e.document,t.usePlugin(Ee),t.usePlugin(ne),t}(this,t)}pluginIsInstalled(t){const{id:e}=t;return e?!!this._plugins.map[e]:-1!==this._plugins.list.indexOf(t)}usePlugin(t,e){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,e),t.listeners&&t.before){let e=0;const n=this.listenerMaps.length,i=t.before.reduce(((t,e)=>(t[e]=!0,t[$e(e)]=!0,t)),{});for(;e<n;e++){const t=this.listenerMaps[e].id;if(t&&(i[t]||i[$e(t)]))break}this.listenerMaps.splice(e,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}addDocument(t,e){if(-1!==this.getDocIndex(t))return!1;const n=st(t);e=e?xt({},e):{},this.documents.push({doc:t,options:e}),this.events.documents.push(t),t!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:n,scope:this,options:e})}removeDocument(t){const e=this.getDocIndex(t),n=st(t),i=this.documents[e].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(e,1),this.events.documents.splice(e,1),this.fire("scope:remove-document",{doc:t,window:n,scope:this,options:i})}getDocIndex(t){for(let e=0;e<this.documents.length;e++)if(this.documents[e].doc===t)return e;return-1}getDocOptions(t){const e=this.getDocIndex(t);return-1===e?null:this.documents[e].options}now(){return(this.window.Date||Date).now()}},Oe=Ae.interactStatic,_e="undefined"!=typeof globalThis?globalThis:window;function Re(t){return lt.bool(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor}function Me(t){return lt.func(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker}Ae.init(_e),Oe.use(pt);var De={id:"auto-start/interactableMethods",install:function(t){const{Interactable:e}=t;e.prototype.getAction=function(e,n,i,r){const o=function(t,e,n,i,r){const o=t.getRect(i),s=e.buttons||{0:1,1:4,3:8,4:16}[e.button],a={action:null,interactable:t,interaction:n,element:i,rect:o,buttons:s};return r.fire("auto-start:check",a),a.action}(this,n,i,r,t);return this.options.actionChecker?this.options.actionChecker(e,n,o,this,r,i):o},e.prototype.ignoreFrom=se((function(t){return this._backCompatOption("ignoreFrom",t)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=se((function(t){return this._backCompatOption("allowFrom",t)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=Me,e.prototype.styleCursor=Re}};function ke(t,e,n,i,r){return e.testIgnoreAllow(e.options[t.name],n,i)&&e.options[t.name].enabled&&Ue(e,n,t,r)?t:null}function Fe(t,e,n,i,r,o,s){for(let a=0,c=i.length;a<c;a++){const c=i[a],l=r[a],u=c.getAction(e,n,t,l);if(!u)continue;const h=ke(u,c,l,o,s);if(h)return{action:h,interactable:c,element:l}}return{action:null,interactable:null,element:null}}function Le(t,e,n,i,r){let o=[],s=[],a=i;function c(t){o.push(t),s.push(a)}for(;lt.element(a);){o=[],s=[],r.interactables.forEachMatch(a,c);const l=Fe(t,e,n,o,s,i,r);if(l.action&&!l.interactable.options[l.action.name].manualStart)return l;a=Rt(a)}return{action:null,interactable:null,element:null}}function Ne(t,e,n){let{action:i,interactable:r,element:o}=e;i=i||{name:null},t.interactable=r,t.element=o,ae(t.prepared,i),t.rect=r&&i.name?r.getRect(o):null,We(t,n),n.fire("autoStart:prepared",{interaction:t})}function Ue(t,e,n,i){const r=t.options,o=r[n.name].max,s=r[n.name].maxPerElement,a=i.autoStart.maxInteractions;let c=0,l=0,u=0;if(!(o&&s&&a))return!1;for(const r of i.interactions.list){const i=r.prepared.name;if(r.interacting()){if(c++,c>=a)return!1;if(r.interactable===t){if(l+=i===n.name?1:0,l>=o)return!1;if(r.element===e&&(u++,i===n.name&&u>=s))return!1}}}return a>0}function He(t,e){return lt.number(t)?(e.autoStart.maxInteractions=t,this):e.autoStart.maxInteractions}function je(t,e,n){const{cursorElement:i}=n.autoStart;i&&i!==t&&(i.style.cursor=""),t.ownerDocument.documentElement.style.cursor=e,t.style.cursor=e,n.autoStart.cursorElement=e?t:null}function We(t,e){const{interactable:n,element:i,prepared:r}=t;if("mouse"!==t.pointerType||!n||!n.options.styleCursor)return void(e.autoStart.cursorElement&&je(e.autoStart.cursorElement,"",e));let o="";if(r.name){const s=n.options[r.name].cursorChecker;o=lt.func(s)?s(r,n,i,t._interacting):e.actions.map[r.name].getCursor(r)}je(t.element,o||"",e)}const Ge={id:"auto-start/base",before:["actions"],install:function(t){const{interactStatic:e,defaults:n}=t;t.usePlugin(De),n.base.actionChecker=null,n.base.styleCursor=!0,xt(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=e=>He(e,t),t.autoStart={maxInteractions:1/0,withinInteractionLimit:Ue,cursorElement:null}},listeners:{"interactions:down":function(t,e){let{interaction:n,pointer:i,event:r,eventTarget:o}=t;if(n.interacting())return;Ne(n,Le(n,i,r,o,e),e)},"interactions:move":(t,e)=>{!function(t,e){let{interaction:n,pointer:i,event:r,eventTarget:o}=t;if("mouse"!==n.pointerType||n.pointerIsDown||n.interacting())return;Ne(n,Le(n,i,r,o,e),e)}(t,e),function(t,e){const{interaction:n}=t;if(!n.pointerIsDown||n.interacting()||!n.pointerWasMoved||!n.prepared.name)return;e.fire("autoStart:before-start",t);const{interactable:i}=n,r=n.prepared.name;r&&i&&(i.options[r].manualStart||!Ue(i,n.element,n.prepared,e)?n.stop():(n.start(n.prepared,i,n.element),We(n,e)))}(t,e)},"interactions:stop":function(t,e){let{interaction:n}=t;const{interactable:i}=n;i&&i.options.styleCursor&&je(n.element,"",e)}},maxInteractions:He,withinInteractionLimit:Ue,validateAction:ke};var Ve={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(t,e){let{interaction:n,eventTarget:i,dx:r,dy:o}=t;if("drag"!==n.prepared.name)return;const s=Math.abs(r),a=Math.abs(o),c=n.interactable.options.drag,l=c.startAxis,u=s>a?"x":s<a?"y":"xy";if(n.prepared.axis="start"===c.lockAxis?u[0]:c.lockAxis,"xy"!==u&&"xy"!==l&&l!==u){n.prepared.name=null;let t=i;const r=function(r){if(r===n.interactable)return;const o=n.interactable.options.drag;if(!o.manualStart&&r.testIgnoreAllow(o,t,i)){const o=r.getAction(n.downPointer,n.downEvent,n,t);if(o&&"drag"===o.name&&function(t,e){if(!e)return!1;const n=e.options.drag.startAxis;return"xy"===t||"xy"===n||n===t}(u,r)&&Ge.validateAction(o,r,t,i,e))return r}};for(;lt.element(t);){const i=e.interactables.forEachMatch(t,r);if(i){n.prepared.name="drag",n.interactable=i,n.element=t;break}t=Rt(t)}}}}};function ze(t){const e=t.prepared&&t.prepared.name;if(!e)return null;const n=t.interactable.options;return n[e].hold||n[e].delay}const Be={id:"auto-start/hold",install:function(t){const{defaults:e}=t;t.usePlugin(Ge),e.perAction.hold=0,e.perAction.delay=0},listeners:{"interactions:new":t=>{let{interaction:e}=t;e.autoStartHoldTimer=null},"autoStart:prepared":t=>{let{interaction:e}=t;const n=ze(e);n>0&&(e.autoStartHoldTimer=setTimeout((()=>{e.start(e.prepared,e.interactable,e.element)}),n))},"interactions:move":t=>{let{interaction:e,duplicate:n}=t;e.autoStartHoldTimer&&e.pointerWasMoved&&!n&&(clearTimeout(e.autoStartHoldTimer),e.autoStartHoldTimer=null)},"autoStart:before-start":t=>{let{interaction:e}=t;ze(e)>0&&(e.prepared.name=null)}},getHoldDuration:ze};var Ye={id:"auto-start",install(t){t.usePlugin(Ge),t.usePlugin(Be),t.usePlugin(Ve)}};Oe.use(Ye);const Xe=2e3,qe=/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,Ke=/iPhone|iPod/.test(navigator.userAgent);class Qe{#t;#e;#n;#i;#r={scans:0,time:null};constructor(e){this.#t=Object.assign({debug:!1,allowedSymbologies:[],useFallback:!1,useWorker:!0,beepOnScan:!0,resolution:{},workerPath:null,binaryPath:null,preview:{}},e),this.#t.resolution=Object.assign({width:1920,height:1080},this.#t.resolution),this.#t.preview=Object.assign({enabled:!0,draggable:!1,mirrored:!0,menu:{},hud:{},zoom:2.5,size:240,position:"bottom-right",padding:20,radius:6,zIndex:1e3},this.#t.preview),this.#t.preview.menu=Object.assign({enabled:!0},this.#t.preview.menu),this.#t.preview.hud=Object.assign({enabled:!0,guide:!0,outline:!0},this.#t.preview.hud),this.#e={devices:[],current:null,stream:null,video:null,buffer:null,history:new Map,audio:new AudioContext,emitter:new t,detector:null,width:0,height:0,orientation:0===screen.orientation.angle?"normal":"rotated"},this.#i={width:0,height:0,container:null,hud:null,video:null,polygons:new Map},this.#n={playing:!1,mirrored:!1,changing:!1};const n=void 0!==import.meta?import.meta.url:document.currentScript.src;null===this.#t.workerPath&&(this.#t.workerPath="webcam-barcode-scanner.worker.js",n&&(this.#t.workerPath=n.replace(/webcam-barcode-scanner(\..*)?\.js/,this.#t.workerPath))),null===this.#t.binaryPath&&(this.#t.binaryPath=this.#t.workerPath.replace("webcam-barcode-scanner.worker.js","webcam-barcode-scanner.wasm")),"suspended"===this.#e.audio.state&&this.#e.audio.resume(),this.#o(),this.#s(),screen.orientation.addEventListener("change",(t=>{this.#a()}))}async reconnect(t){if(await this.#c(),null==this.#e.detector)return;let e,n=!0;t.deviceId&&(n={width:this.#t.resolution.width,height:this.#t.resolution.height,deviceId:{exact:t.deviceId}});try{e=await navigator.mediaDevices.getUserMedia({video:n})}catch(t){}if(e){let n="front",i=e.getVideoTracks();for(let t of i){if(!t.getCapabilities)continue;let e=t.getCapabilities();e.facingMode&&(n=0==e.facingMode.length||"user"==e.facingMode[0]?"front":"back")}return this.#e.stream=e,this.#e.current=t.deviceId,this.#n.mirrored="front"==n,await this.#l(),this.#u(e,t.deviceId),t.deviceId}}async connect(){if(await this.#c(),null==this.#e.detector)return;let t;try{t=await navigator.mediaDevices.getUserMedia({video:this.#t.resolution})}catch(t){}if(t){let e=null,n="front",i=t.getVideoTracks();for(let t of i){if(!t.getCapabilities)continue;let i=t.getCapabilities();i.facingMode&&(n=0==i.facingMode.length||"user"==i.facingMode[0]?"front":"back"),i.deviceId&&(e=i.deviceId)}return this.#e.stream=t,this.#e.current=e,this.#n.mirrored="front"==n,await this.#l(),this.#u(t,e),e}}async change(t){return await this.#h(t)}async disconnect(){this.#p()}addEventListener(t,e){this.#e.emitter.on(t,e)}get devices(){return this.#e.devices}#o(){"BarcodeDetector"in window&&!this.#t.useFallback?this.#d():"Worker"in window&&"WebAssembly"in window&&this.#f()}#d(){const t=new BarcodeDetector;this.#e.detector=async e=>{let n=await t.detect(e),i=[];for(let t of n){let e=null;switch(t.format){case"ean_8":e="ean8";break;case"ean_13":e="ean13";break;case"upc_a":e="upca";break;case"upc_e":e="upce";break;case"code_39":e="code39";break;case"code_93":e="code93";break;case"code_128":e="code128";break;case"codabar":e="codabar";break;case"itf":e="interleaved-2-of-5";break;case"aztec":e="aztec-code";break;case"data_matrix":e="data-matrix";break;case"qr_code":e="qr-code";break;case"pdf417":e="pdf417"}i.push({value:t.rawValue,symbology:e,polygon:t.cornerPoints,raw:t})}return i}}async#f(){let t=!1;if(this.#t.useWorker){let e=await fetch(this.#t.workerPath),n=URL.createObjectURL(new Blob([await e.text()],{type:"application/javascript"}));try{const e=new Worker(n,{type:"module"});e.addEventListener("error",(e=>{console.log("Failed to create worker, using main thread for barcode detection, is your workerPath set correctly?"),t=!0}));let i=w(e);await i.initialize({binaryPath:this.#t.binaryPath}),this.#v(i.decodeBarcode)}catch(e){console.log("Failed to create worker, using main thread for barcode detection, is your workerPath set correctly?",e),t=!0}}this.#t.useWorker&&!t||(!function(t){J(tt,t)}({locateFile:(t,e)=>t.endsWith(".wasm")?this.#t.binaryPath:e+t}),this.#v(et))}#v(t){let e,n,i,r=document.createElement("canvas");this.#e.detector=async o=>{let s=[];i?e==o.videoWidth&&n==o.videoHeight||(e=r.width=o.videoWidth,n=r.height=o.videoHeight,i.reset()):(e=r.width=o.videoWidth,n=r.height=o.videoHeight,i=r.getContext("2d",{willReadFrequently:!0}));try{let r;try{i.drawImage(o,0,0,e,n),r=i.getImageData(0,0,e,n)}catch(t){return i.reset(),[]}let a=await t(r,{maxNumberOfSymbols:1});if(a&&a.length)for(let t of a){if(t.error)continue;let e=null;switch(t.format){case"Aztec":e="aztec-code";break;case"Codabar":e="codabar";break;case"Code39":e="code39";break;case"Code93":e="code93";break;case"Code128":e="code128";break;case"DataBar":e="gs1-databar-omni";break;case"DataBarExpanded":e="gs1-databar-expanded";break;case"DataMatrix":e="data-matrix";break;case"EAN-8":e="ean8";break;case"EAN-13":e="ean13";break;case"ITF":e="interleaved-2-of-5";break;case"MaxiCode":e="maxicode";break;case"QRCode":e="qr-code";break;case"PDF417":e="pdf417";break;case"UPCA":e="upca";break;case"UPCE":e="upce";break;case"MicroQRCode":case"RMQRCode":e="qr-code-micro";break;case"DXFilmEdge":e="dx-film-edge"}e&&s.push({value:t.text,symbology:e,polygon:[{x:t.position.topLeft.x,y:t.position.topLeft.y},{x:t.position.topRight.x,y:t.position.topRight.y},{x:t.position.bottomRight.x,y:t.position.bottomRight.y},{x:t.position.bottomLeft.x,y:t.position.bottomLeft.y}],raw:t})}}catch(t){throw console.error(t),t}return s}}async#c(){let t=0;for(;null==this.#e.detector&&(await new Promise((t=>setTimeout(t,100))),t++,!(t>10)););}async#l(){let t=await navigator.mediaDevices.enumerateDevices();for(let e of t)if("videoinput"==e.kind){let t="front";if(e.getCapabilities){let n=e.getCapabilities();t=n.facingMode&&0!=n.facingMode.length&&"user"!=n.facingMode[0]?"back":"front"}this.#e.devices.push({label:e.label,deviceId:e.deviceId,location:t})}}async#u(t,e){let n,i;for(let e of t.getVideoTracks()){e.getSettings()&&(n=e.getSettings().width,i=e.getSettings().height)}if(this.#e.width=n,this.#e.height=i,qe){let t="landscape";t=Ke?"normal"===this.#e.orientation?"portrait":"landscape":"normal"===this.#e.orientation?"landscape":"portrait","portrait"===t?(this.#e.width=Math.min(n,i),this.#e.height=Math.max(n,i)):(this.#e.width=Math.max(n,i),this.#e.height=Math.min(n,i))}this.#e.video=document.createElement("video"),this.#e.video.playsInline=!0,this.#e.video.controls=!1,this.#e.video.srcObject=t,this.#e.video.addEventListener("loadedmetadata",(()=>{this.#e.video.play()})),this.#e.video.addEventListener("play",(()=>{this.#n.playing=!0})),this.#e.emitter.emit("connected",{type:"webcam",deviceId:e}),this.#g(),this.#t.preview.enabled&&(this.#m(),this.#i.video=await this.#y(t))}async#h(t){let e=this.#e.devices.find((e=>e.deviceId==t)),n=this.#e.stream,i=this.#i.video;this.#t.preview.enabled&&qe?this.#w(this.#i.video):i.style.zIndex=2,this.#t.preview.enabled&&this.#i.container.classList.add("changing"),this.#n.playing=!1,this.#n.mirrored="front"==e.location;let r,o={width:this.#t.resolution.width,height:this.#t.resolution.height,deviceId:t};try{r=await navigator.mediaDevices.getUserMedia({video:o})}catch(t){}if(r){if(this.#e.stream=r,this.#e.current=t,this.#e.video.srcObject=r,this.#t.preview.enabled){this.#i.video=await this.#y(r),await Promise.race([new Promise((t=>this.#i.video.addEventListener("play",t,{once:!0}))),new Promise((t=>setTimeout(t,Xe)))]),await new Promise((t=>setTimeout(t,50))),await this.#b(i),this.#i.container.classList.remove("changing");let t=n.getTracks();for(let e of t)e.stop()}return this.#e.emitter.emit("changed",{type:"webcam",deviceId:t}),t}this.#t.preview.enabled&&this.#i.container.classList.remove("changing")}async#p(){if(this.#i.video&&await this.#x(),this.#n.playing=!1,this.#e.video&&(this.#e.video.remove(),this.#e.video=null),this.#e.stream){let t=this.#e.stream.getTracks();for(let e of t)e.stop();this.#e.stream=null}this.#e.current=null,this.#e.emitter.emit("disconnected")}#m(){let t=this.#t.preview.size,e=this.#e.height/this.#e.width*this.#t.preview.size;this.#e.width<this.#e.height&&(e=this.#t.preview.size,t=this.#e.width/this.#e.height*this.#t.preview.size),this.#i.width=t,this.#i.height=e;let n=document.createElement("div");n.classList.add("webcam-barcode-scanner-preview"),n.style.opacity=0,n.style.transition="opacity 0.4s",n.style.position="fixed",n.style.width=`${this.#i.width}px`,n.style.height=`${this.#i.height}px`,n.style.borderRadius=`${this.#t.preview.radius}px`,n.style.overflow="hidden",n.style.zIndex=this.#t.preview.zIndex,n.style.backgroundColor="black";let i="number"!=typeof this.#t.preview.padding?this.#t.preview.padding:{top:this.#t.preview.padding,right:this.#t.preview.padding,bottom:this.#t.preview.padding,left:this.#t.preview.padding};switch(this.#t.preview.position){case"top-left":n.style.top=`${i.top}px`,n.style.left=`${i.left}px`;break;case"top-right":n.style.top=`${i.top}px`,n.style.right=`${i.right}px`;break;case"bottom-left":n.style.bottom=`${i.bottom}px`,n.style.left=`${i.left}px`;break;case"bottom-right":n.style.bottom=`${i.bottom}px`,n.style.right=`${i.right}px`}if(this.#t.preview.draggable){let t,e,r,o,s,a,c={x:0,y:0},l=t=>{c.x+=t.dx,c.y+=t.dy,t.target.style.transform=`translate(${c.x}px, ${c.y}px)`},u=async l=>{let u=l.pageX<window.innerWidth>>1?"left":"right",h=l.pageY<window.innerHeight>>1?"top":"bottom";t=e=r=o="auto","left"==u?(e=`${i.left}px`,s=i.left):(o=`${i.right}px`,s=window.innerWidth-l.target.clientWidth-i.right),"top"==h?(t=`${i.top}px`,a=i.top):(r=`${i.bottom}px`,a=window.innerHeight-l.target.clientHeight-i.bottom);let p=[{transform:`translate(${s-l.target.offsetLeft}px,${a-l.target.offsetTop}px`}],d=l.target.animate(p,{duration:150});await d.finished,n.style.inset=`${t} ${o} ${r} ${e}`,n.style.transform="",c.x=0,c.y=0};Oe(".webcam-barcode-scanner-preview").draggable({listeners:{move:l,end:u}})}if(this.#t.preview.hud.enabled){let t=document.createElement("canvas");t.width=this.#e.width,t.height=this.#e.height,t.style.width=`${this.#i.width}px`,t.style.height=`${this.#i.height}px`,t.style.position="absolute",t.style.zIndex=100,t.style.pointerEvents="none",n.appendChild(t),this.#i.hud=t.getContext("2d")}if(this.#t.preview.menu.enabled){let t=document.createElement("select");t.style.position="absolute",t.style.zIndex=102,t.style.width="30px",t.style.height="30px",t.style.opacity=0,t.style.cursor="pointer",t.style.appearance="none";for(let e of this.#e.devices){let n=document.createElement("option");n.value=e.deviceId,n.text=e.label,t.appendChild(n)}t.addEventListener("change",(()=>{this.#h(t.value)})),n.appendChild(t);let e=document.createElement("div");e.style.position="absolute",e.style.zIndex=101,e.style.top="5px",e.style.left="5px",e.style.width="20px",e.style.height="20px",e.style.fontSize="14px",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.backgroundColor="#666666aa",e.style.color="white",e.style.borderRadius="50%",e.style.pointerEvents="none",e.textContent="",n.appendChild(e)}document.body.appendChild(n),this.#i.container=n,this.#t.preview.hud.enabled&&this.#T()}async#a(){if(!this.#i.container)return;this.#n.changing=!0;let t=0===screen.orientation.angle?"normal":"rotated",[e,n]=[this.#i.width,this.#i.height],[i,r]=[this.#e.width,this.#e.height];this.#e.orientation!=t&&([e,n]=[n,e],[i,r]=[r,i]),this.#i.container.style.width=`${e}px`,this.#i.container.style.height=`${n}px`;let o=this.#i.container.querySelector("canvas");o&&(o.width=i,o.height=r,o.style.width=`${e}px`,o.style.height=`${n}px`);let s=this.#i.container.querySelector("video");s&&(s.width=e,s.height=n),await new Promise((t=>setTimeout(t,500))),this.#E(),this.#n.changing=!1}async#P(){await new Promise((t=>setTimeout(t,50))),this.#i.container.style.opacity=1}async#x(){this.#i.container&&(this.#i.container.style.opacity=0,await new Promise((t=>this.#i.container.ontransitionend=t)),this.#i.container.remove()),this.#i.container=null,this.#i.video=null}#E(){this.#i.polygons.clear()}#T(){let t=Date.now();for(let[e,n]of this.#i.polygons)t-n.timestamp>300&&this.#i.polygons.delete(e);let e=this.#i.hud.canvas.width,n=this.#i.hud.canvas.height;if(this.#i.hud.clearRect(0,0,e,n),this.#t.preview.hud.guide&&!this.#i.polygons.size){let t=60,i=e/2,r=n/2,o=.3*e;this.#i.hud.strokeStyle="rgba(255, 0, 0, 0.3)",this.#i.hud.beginPath(),this.#i.hud.lineWidth=12,this.#i.hud.moveTo(i-o-6,r-t),this.#i.hud.lineTo(i-o-6,r+t),this.#i.hud.moveTo(i+o+6,r-t),this.#i.hud.lineTo(i+o+6,r+t),this.#i.hud.stroke(),this.#i.hud.beginPath(),this.#i.hud.lineWidth=36,this.#i.hud.moveTo(i-o,r),this.#i.hud.lineTo(i+o,r),this.#i.hud.stroke()}if(this.#t.preview.hud.outline){let t=this.#i.polygons.values();if(!this.#n.changing){this.#i.hud.strokeStyle="lime",this.#i.hud.lineWidth=8;let i=this.#t.preview.zoom,r=e/2-e*i/2,o=n/2-n*i/2;for(let{polygon:n}of t){if(this.#i.hud.beginPath(),this.#n.mirrored){this.#i.hud.moveTo(r+(e-n[0].x)*i,o+n[0].y*i);for(let t=1;t<n.length;t++)this.#i.hud.lineTo(r+(e-n[t].x)*i,o+n[t].y*i);this.#i.hud.lineTo(r+(e-n[0].x)*i,o+n[0].y*i)}else{this.#i.hud.moveTo(r+n[0].x*i,o+n[0].y*i);for(let t=1;t<n.length;t++)this.#i.hud.lineTo(r+n[t].x*i,o+n[t].y*i);this.#i.hud.lineTo(r+n[0].x*i,o+n[0].y*i)}this.#i.hud.closePath(),this.#i.hud.stroke()}}}this.#i.container&&requestAnimationFrame((()=>this.#T()))}async#y(t){let e=document.createElement("video");e.playsInline=!0,e.controls=!1,e.width=this.#i.container.clientWidth,e.height=this.#i.container.clientHeight,e.srcObject=t,e.style.position="absolute",e.style.zIndex=1,e.style.display="none";let n=this.#t.preview.zoom,i=this.#t.preview.zoom;return this.#n.mirrored&&this.#t.preview.mirrored&&(n=-n),e.style.transform=`scaleX(${n}) scaleY(${i})`,e.addEventListener("loadedmetadata",(()=>{e.play()})),this.#i.container.appendChild(e),await Promise.race([new Promise((t=>e.addEventListener("play",t,{once:!0}))),new Promise((t=>setTimeout(t,Xe)))]),e.style.display="block",this.#P(),e}async#w(t){this.#n.changing=!0;let e=document.createElement("canvas");e.classList.add("snapshot"),e.width=t.width*window.devicePixelRatio,e.height=t.height*window.devicePixelRatio;let n=this.#t.preview.zoom,i=this.#t.preview.zoom;this.#n.mirrored&&this.#t.preview.mirrored&&(n=-n),e.style.transform=`scaleX(${n}) scaleY(${i})`,e.style.position="absolute",e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.borderRadius=`${this.#t.preview.radius}px`,e.style.zIndex=99,e.style.backgroundColor="black",this.#i.container.appendChild(e),e.getContext("2d").drawImage(t,0,0,t.width*window.devicePixelRatio,t.height*window.devicePixelRatio),await new Promise((t=>setTimeout(t,Xe))),e.style.transition="opacity 0.4s",e.style.opacity=0,await new Promise((t=>e.ontransitionend=t)),e.remove(),this.#n.changing=!1}async#b(t){return t&&(t.style.transition="opacity 0.4s",t.style.opacity=0,await new Promise((e=>t.ontransitionend=e)),t.remove()),null}#g(){this.#r.time=Date.now(),setInterval((()=>{this.#r.scans>0&&(this.#t.debug&&console.log(`Scanned ${this.#r.scans} barcodes in ${Date.now()-this.#r.time}ms (average ${this.#r.scans/(Date.now()-this.#r.time)*1e3} scans/s`),this.#r.time=Date.now(),this.#r.scans=0)}),5e3);let t=async()=>{if(this.#n.playing){let t=await this.#e.detector(this.#e.video);if(t.length)for(let e of t)this.#S(e);this.#r.scans++}else this.#r.time=Date.now(),this.#r.scans=0;requestAnimationFrame(t)};requestAnimationFrame(t)}#S(t){if(this.#t.preview.enabled&&this.#t.preview.hud.enabled&&t.polygon&&this.#i.polygons.set(t.value,{timestamp:Date.now(),polygon:t.polygon}),this.#e.history.has(t.value))return;if(this.#e.history.set(t.value,Date.now()),this.#t.allowedSymbologies.length&&!this.#t.allowedSymbologies.includes(t.symbology))return;this.#t.beepOnScan&&this.#C();let e={value:t.value,symbology:t.symbology,bytes:[new Uint8Array(t.value.split("").map((t=>t.charCodeAt(0))))]};t.raw?.symbologyIdentifier&&(e.aim=t.raw.symbologyIdentifier);let n=l.parse(e);n&&(e.data=n),this.#t.debug&&(e.debug=t),this.#e.emitter.emit("barcode",e)}#s(){setInterval((()=>{let t=Date.now();for(let[e,n]of this.#e.history)t-n>2e3&&this.#e.history.delete(e)}),2e3)}#C(){"suspended"==this.#e.audio.state&&this.#e.audio.resume();let t=this.#e.audio.createOscillator(),e=this.#e.audio.createGain();t.connect(e),t.frequency.value=2800,t.type="square",e.connect(this.#e.audio.destination),e.gain.value=1,t.start(this.#e.audio.currentTime),t.stop(this.#e.audio.currentTime+.08)}}export{Qe as default};
//# sourceMappingURL=webcam-barcode-scanner.esm.js.map
